/**
 * Copyright (c) 2006-2012, JGraph Ltd
 * 
 * Modified version of the mxgraph GraphEditor. 
 * 2022, Muhammad Afif Abroory (https://github.com/afifabroory/org-chart-editor2)
 */
var OpenDialog=function(){var e=document.createElement("iframe");e.style.backgroundColor="transparent",e.allowTransparency="true",e.style.borderStyle="none",e.style.borderWidth="0px",e.style.overflow="hidden",e.frameBorder="0";var t=mxClient.IS_VML&&(null==document.documentMode||document.documentMode<8)?20:0;e.setAttribute("width",(Editor.useLocalStorage?640:320)+t+"px"),e.setAttribute("height",(Editor.useLocalStorage?480:220)+t+"px"),e.setAttribute("src",OPEN_FORM),this.container=e},ColorDialog=function(e,t,l,i){this.editorUi=e;var n=document.createElement("input");n.style.marginBottom="10px",n.style.width="216px",mxClient.IS_IE&&(n.style.marginTop="10px",document.body.appendChild(n));var a=null!=l?l:this.createApplyFunction();function o(){var t=n.value;/(^#?[a-zA-Z0-9]*$)/.test(t)?("none"!=t&&"#"!=t.charAt(0)&&(t="#"+t),ColorDialog.addRecentColor("none"!=t?t.substring(1):t,12),a(t),e.hideDialog()):e.handleError({message:mxResources.get("invalidInput")})}this.init=function(){mxClient.IS_TOUCH||n.focus()};var r=new mxJSColor.color(n);r.pickerOnfocus=!1,r.showPicker();var d=document.createElement("div");mxJSColor.picker.box.style.position="relative",mxJSColor.picker.box.style.width="230px",mxJSColor.picker.box.style.height="100px",mxJSColor.picker.box.style.paddingBottom="10px",d.appendChild(mxJSColor.picker.box);var s=document.createElement("center");function c(){var e=u(0==ColorDialog.recentColors.length?["FFFFFF"]:ColorDialog.recentColors,11,"FFFFFF",!0);return e.style.marginBottom="8px",e}function u(e,t,l,i){t=null!=t?t:12;var a=document.createElement("table");a.style.borderCollapse="collapse",a.setAttribute("cellspacing","0"),a.style.marginBottom="20px",a.style.cellSpacing="0px";var d=document.createElement("tbody");a.appendChild(d);for(var u=e.length/t,p=0;p<u;p++){for(var m=document.createElement("tr"),g=0;g<t;g++)!function(e){var t=document.createElement("td");t.style.border="1px solid black",t.style.padding="0px",t.style.width="16px",t.style.height="16px",null==e&&(e=l),"none"==e?t.style.background="url('"+Dialog.prototype.noColorImage+"')":t.style.backgroundColor="#"+e,m.appendChild(t),null!=e&&(t.style.cursor="pointer",mxEvent.addListener(t,"click",(function(){"none"==e?(r.fromString("ffffff"),n.value="none"):r.fromString(e)})),mxEvent.addListener(t,"dblclick",o))}(e[p*t+g]);d.appendChild(m)}if(i){var h=document.createElement("td");h.setAttribute("title",mxResources.get("reset")),h.style.border="1px solid black",h.style.padding="0px",h.style.width="16px",h.style.height="16px",h.style.backgroundImage="url('"+Dialog.prototype.closeImage+"')",h.style.backgroundPosition="center center",h.style.backgroundRepeat="no-repeat",h.style.cursor="pointer",m.appendChild(h),mxEvent.addListener(h,"click",(function(){ColorDialog.resetRecentColors(),a.parentNode.replaceChild(c(),a)}))}return s.appendChild(a),a}d.appendChild(n),mxUtils.br(d),c();var p=u(this.presetColors);p.style.marginBottom="8px",(p=u(this.defaultColors)).style.marginBottom="16px",d.appendChild(s);var m=document.createElement("div");m.style.textAlign="right",m.style.whiteSpace="nowrap";var g=mxUtils.button(mxResources.get("cancel"),(function(){e.hideDialog(),null!=i&&i()}));g.className="geBtn",e.editor.cancelFirst&&m.appendChild(g);var h=mxUtils.button(mxResources.get("apply"),o);h.className="geBtn gePrimaryBtn",m.appendChild(h),e.editor.cancelFirst||m.appendChild(g),null!=t&&("none"==t?(r.fromString("ffffff"),n.value="none"):r.fromString(t)),d.appendChild(m),this.picker=r,this.colorInput=n,mxEvent.addListener(d,"keydown",(function(t){27==t.keyCode&&(e.hideDialog(),null!=i&&i(),mxEvent.consume(t))})),this.container=d};ColorDialog.prototype.presetColors=["E6D0DE","CDA2BE","B5739D","E1D5E7","C3ABD0","A680B8","D4E1F5","A9C4EB","7EA6E0","D5E8D4","9AC7BF","67AB9F","D5E8D4","B9E0A5","97D077","FFF2CC","FFE599","FFD966","FFF4C3","FFCE9F","FFB570","F8CECC","F19C99","EA6B66"],ColorDialog.prototype.defaultColors=["none","FFFFFF","E6E6E6","CCCCCC","B3B3B3","999999","808080","666666","4D4D4D","333333","1A1A1A","000000","FFCCCC","FFE6CC","FFFFCC","E6FFCC","CCFFCC","CCFFE6","CCFFFF","CCE5FF","CCCCFF","E5CCFF","FFCCFF","FFCCE6","FF9999","FFCC99","FFFF99","CCFF99","99FF99","99FFCC","99FFFF","99CCFF","9999FF","CC99FF","FF99FF","FF99CC","FF6666","FFB366","FFFF66","B3FF66","66FF66","66FFB3","66FFFF","66B2FF","6666FF","B266FF","FF66FF","FF66B3","FF3333","FF9933","FFFF33","99FF33","33FF33","33FF99","33FFFF","3399FF","3333FF","9933FF","FF33FF","FF3399","FF0000","FF8000","FFFF00","80FF00","00FF00","00FF80","00FFFF","007FFF","0000FF","7F00FF","FF00FF","FF0080","CC0000","CC6600","CCCC00","66CC00","00CC00","00CC66","00CCCC","0066CC","0000CC","6600CC","CC00CC","CC0066","990000","994C00","999900","4D9900","009900","00994D","009999","004C99","000099","4C0099","990099","99004D","660000","663300","666600","336600","006600","006633","006666","003366","000066","330066","660066","660033","330000","331A00","333300","1A3300","003300","00331A","003333","001933","000033","190033","330033","33001A"],ColorDialog.prototype.createApplyFunction=function(){return mxUtils.bind(this,(function(e){var t=this.editorUi.editor.graph;t.getModel().beginUpdate();try{t.setCellStyles(this.currentColorKey,e),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[this.currentColorKey],"values",[e],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}))},ColorDialog.recentColors=[],ColorDialog.addRecentColor=function(e,t){null!=e&&(mxUtils.remove(e,ColorDialog.recentColors),ColorDialog.recentColors.splice(0,0,e),ColorDialog.recentColors.length>=t&&ColorDialog.recentColors.pop())},ColorDialog.resetRecentColors=function(){ColorDialog.recentColors=[]};var AboutDialog=function(e){var t=document.createElement("div");t.setAttribute("align","center");var l=document.createElement("h3");mxUtils.write(l,mxResources.get("about")+" GraphEditor"),t.appendChild(l);var i=document.createElement("img");i.style.border="0px",i.setAttribute("width","176"),i.setAttribute("width","151"),i.setAttribute("src",IMAGE_PATH+"/logo.png"),t.appendChild(i),mxUtils.br(t),mxUtils.write(t,"Powered by mxGraph "+mxClient.VERSION),mxUtils.br(t);var n=document.createElement("a");n.setAttribute("href","http://www.jgraph.com/"),n.setAttribute("target","_blank"),mxUtils.write(n,"www.jgraph.com"),t.appendChild(n),mxUtils.br(t),mxUtils.br(t);var a=mxUtils.button(mxResources.get("close"),(function(){e.hideDialog()}));a.className="geBtn gePrimaryBtn",t.appendChild(a),this.container=t},ImageDialog=function(e,t,l){var i=document.createElement("div");i.setAttribute("align","center"),i.style.display="flex",i.style.height="100%",i.style.flexDirection="column";var n=document.createElement("h2");n.style.marginTop="0px",mxUtils.write(n,"Insert image from assets"),i.appendChild(n);var a=document.createElement("div");a.setAttribute("id","imageContainer");var o=[];var r=[];const d=e=>{if("flex"===o[e].style.display)return o[t=e].style.display="none",void r[t].classList.remove("active-accordion");var t;(e=>{o[e].style.display="flex",r[e].classList.add("active-accordion")})(e),r[e].scrollIntoView(!0)},s=(e,t,l=!1)=>{let i=document.createElement("div");var n;i.style.display=l?"flex":"none",i.style.alignItems="flex-start",i.style.flexWrap="wrap",i.style.justifyContent="center",e.forEach(((e,t)=>{let l=document.createElement("label"),n=document.createElement("input");n.type="radio",n.name="images",n.value=e.photo;let a=document.createElement("figure"),o=new Image;o.onload=()=>{let t=document.createElement("figcaption");t.innerText=e.name;let r=document.createElement("figcaption");r.innerText=e.position,a.appendChild(o),a.appendChild(t),a.appendChild(r),l.appendChild(n),l.appendChild(a),i.appendChild(l)},o.src=e.photo,o.width=80})),t.appendChild(i),n=i,o.push(n)};getImageAssets().then((n=>{Object.keys(n).forEach(((e,t)=>{let l=document.createElement("div"),i=document.createElement("button");var o;i.classList.add("accordion"),i.innerText=e,i.addEventListener("click",(i=>{"0"===i.target.getAttribute("content-loaded")&&(s(n[e],l),i.target.setAttribute("content-loaded",1)),d(t)})),l.appendChild(i),0==t?(s(n[e],l,!0),i.classList.add("active-accordion"),i.setAttribute("content-loaded",1)):i.setAttribute("content-loaded",0),a.appendChild(l),o=i,r.push(o)})),i.appendChild(a);var o=document.createElement("div");o.setAttribute("align","right");var c=mxUtils.button(mxResources.get("cancel"),(function(){e.hideDialog(),null!=l&&l()}));c.className="geBtn",o.appendChild(c);var u=mxUtils.button("Insert",(function(){var l=document.querySelector('#imageContainer input[name="images"]:checked').value,i=new Image;i.onload=()=>{t(l,i.width,i.height)},i.src=l,e.hideDialog()}));u.className="geBtn gePrimaryBtn",o.appendChild(u),i.append(o)})),this.container=i},TextareaDialog=function(e,t,l,i,n,a,o,r,d,s,c,u,p,m){var g,h;o=null!=o?o:300,r=null!=r?r:120,s=null!=s&&s;var x=document.createElement("table"),v=document.createElement("tbody");g=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",h.style.width="100px",mxUtils.write(h,t),g.appendChild(h),v.appendChild(g),g=document.createElement("tr"),h=document.createElement("td");var C=document.createElement("textarea");if(c&&C.setAttribute("wrap","off"),C.setAttribute("spellcheck","false"),C.setAttribute("autocorrect","off"),C.setAttribute("autocomplete","off"),C.setAttribute("autocapitalize","off"),mxUtils.write(C,l||""),C.style.resize="none",C.style.width=o+"px",C.style.height=r+"px",this.textarea=C,this.init=function(){C.focus(),C.scrollTop=0},h.appendChild(C),g.appendChild(h),v.appendChild(g),g=document.createElement("tr"),(h=document.createElement("td")).style.paddingTop="14px",h.style.whiteSpace="nowrap",h.setAttribute("align","right"),null!=p){var b=mxUtils.button(mxResources.get("help"),(function(){e.editor.graph.openLink(p)}));b.className="geBtn",h.appendChild(b)}if(null!=m)for(var y=0;y<m.length;y++)!function(e,t){var l=mxUtils.button(e,(function(e){t(e,C)}));l.className="geBtn",h.appendChild(l)}(m[y][0],m[y][1]);var f=mxUtils.button(a||mxResources.get("cancel"),(function(){e.hideDialog(),null!=n&&n()}));if(f.className="geBtn",e.editor.cancelFirst&&h.appendChild(f),null!=d&&d(h,C),null!=i){var E=mxUtils.button(u||mxResources.get("apply"),(function(){s||e.hideDialog(),i(C.value)}));E.className="geBtn gePrimaryBtn",h.appendChild(E)}e.editor.cancelFirst||h.appendChild(f),g.appendChild(h),v.appendChild(g),x.appendChild(v),this.container=x},EditDiagramDialog=function(e){var t=document.createElement("div");t.style.textAlign="right";var l=document.createElement("textarea");if(l.setAttribute("wrap","off"),l.setAttribute("spellcheck","false"),l.setAttribute("autocorrect","off"),l.setAttribute("autocomplete","off"),l.setAttribute("autocapitalize","off"),l.style.overflow="auto",l.style.resize="none",l.style.width="600px",l.style.height="360px",l.style.marginBottom="16px",l.value=mxUtils.getPrettyXml(e.editor.getGraphXml()),t.appendChild(l),this.init=function(){l.focus()},Graph.fileSupport){l.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault()}),!1),l.addEventListener("drop",(function(t){if(t.stopPropagation(),t.preventDefault(),t.dataTransfer.files.length>0){var i=t.dataTransfer.files[0],n=new FileReader;n.onload=function(e){l.value=e.target.result},n.readAsText(i)}else l.value=e.extractGraphModelFromEvent(t)}),!1)}var i=mxUtils.button(mxResources.get("cancel"),(function(){e.hideDialog()}));i.className="geBtn",e.editor.cancelFirst&&t.appendChild(i);var n=document.createElement("select");if(n.style.width="180px",n.className="geBtn",e.editor.graph.isEnabled()){var a=document.createElement("option");a.setAttribute("value","replace"),mxUtils.write(a,mxResources.get("replaceExistingDrawing")),n.appendChild(a)}var o=document.createElement("option");if(o.setAttribute("value","new"),mxUtils.write(o,mxResources.get("openInNewWindow")),EditDiagramDialog.showNewWindowOption&&n.appendChild(o),e.editor.graph.isEnabled()){var r=document.createElement("option");r.setAttribute("value","import"),mxUtils.write(r,mxResources.get("addToExistingDrawing")),n.appendChild(r)}t.appendChild(n);var d=mxUtils.button(mxResources.get("ok"),(function(){var t=Graph.zapGremlins(mxUtils.trim(l.value)),i=null;if("new"==n.value)e.hideDialog(),e.editor.editAsNew(t);else if("replace"==n.value){e.editor.graph.model.beginUpdate();try{e.editor.setGraphXml(mxUtils.parseXml(t).documentElement),e.hideDialog()}catch(e){i=e}finally{e.editor.graph.model.endUpdate()}}else if("import"==n.value){e.editor.graph.model.beginUpdate();try{var a=mxUtils.parseXml(t),o=new mxGraphModel;new mxCodec(a).decode(a.documentElement,o);var r=o.getChildren(o.getChildAt(o.getRoot(),0));e.editor.graph.setSelectionCells(e.editor.graph.importCells(r)),e.hideDialog()}catch(e){i=e}finally{e.editor.graph.model.endUpdate()}}null!=i&&mxUtils.alert(i.message)}));d.className="geBtn gePrimaryBtn",t.appendChild(d),e.editor.cancelFirst||t.appendChild(i),this.container=t};EditDiagramDialog.showNewWindowOption=!0;var ExportDialog=function(e){var t,l,i=e.editor.graph,n=i.getGraphBounds(),a=i.view.scale,o=Math.ceil(n.width/a),r=Math.ceil(n.height/a),d=document.createElement("table"),s=document.createElement("tbody");d.setAttribute("cellpadding",mxClient.IS_SF?"0":"2"),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",l.style.width="100px",mxUtils.write(l,mxResources.get("filename")+":"),t.appendChild(l);var c=document.createElement("input");c.setAttribute("value",e.editor.getOrCreateFilename()),c.style.width="180px",(l=document.createElement("td")).appendChild(c),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("format")+":"),t.appendChild(l);var u=document.createElement("select");u.style.width="180px";var p=document.createElement("option");p.setAttribute("value","png"),mxUtils.write(p,mxResources.get("formatPng")),u.appendChild(p);var m=document.createElement("option");ExportDialog.showGifOption&&(m.setAttribute("value","gif"),mxUtils.write(m,mxResources.get("formatGif")),u.appendChild(m));var g=document.createElement("option");g.setAttribute("value","jpg"),mxUtils.write(g,mxResources.get("formatJpg")),u.appendChild(g);var h=document.createElement("option");h.setAttribute("value","pdf"),mxUtils.write(h,mxResources.get("formatPdf")),u.appendChild(h);var x=document.createElement("option");if(x.setAttribute("value","svg"),mxUtils.write(x,mxResources.get("formatSvg")),u.appendChild(x),ExportDialog.showXmlOption){var v=document.createElement("option");v.setAttribute("value","xml"),mxUtils.write(v,mxResources.get("formatXml")),u.appendChild(v)}(l=document.createElement("td")).appendChild(u),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("zoom")+" (%):"),t.appendChild(l);var C=document.createElement("input");C.setAttribute("type","number"),C.setAttribute("value","100"),C.style.width="180px",(l=document.createElement("td")).appendChild(C),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("width")+":"),t.appendChild(l);var b=document.createElement("input");b.setAttribute("value",o),b.style.width="180px",(l=document.createElement("td")).appendChild(b),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("height")+":"),t.appendChild(l);var y=document.createElement("input");y.setAttribute("value",r),y.style.width="180px",(l=document.createElement("td")).appendChild(y),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("dpi")+":"),t.appendChild(l);var f=document.createElement("select");f.style.width="180px";var E=document.createElement("option");E.setAttribute("value","100"),mxUtils.write(E,"100dpi"),f.appendChild(E);var w=document.createElement("option");w.setAttribute("value","200"),mxUtils.write(w,"200dpi"),f.appendChild(w);var F=document.createElement("option");F.setAttribute("value","300"),mxUtils.write(F,"300dpi"),f.appendChild(F);var A=document.createElement("option");A.setAttribute("value","400"),mxUtils.write(A,"400dpi"),f.appendChild(A);var k=document.createElement("option");k.setAttribute("value","custom"),mxUtils.write(k,mxResources.get("custom")),f.appendChild(k);var D=document.createElement("input");D.style.width="180px",D.style.display="none",D.setAttribute("value","100"),D.setAttribute("type","number"),D.setAttribute("min","50"),D.setAttribute("step","50");var U=!1;mxEvent.addListener(f,"change",(function(){"custom"==this.value?(this.style.display="none",D.style.display="",D.focus()):(D.value=this.value,U||(C.value=this.value))})),mxEvent.addListener(D,"change",(function(){var e=parseInt(D.value);isNaN(e)||e<=0?D.style.backgroundColor="red":(D.style.backgroundColor="",U||(C.value=e))})),(l=document.createElement("td")).appendChild(f),l.appendChild(D),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("background")+":"),t.appendChild(l);var S=document.createElement("input");S.setAttribute("type","checkbox"),S.checked=null==i.background||i.background==mxConstants.NONE,(l=document.createElement("td")).appendChild(S),mxUtils.write(l,mxResources.get("transparent")),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("borderWidth")+":"),t.appendChild(l);var R=document.createElement("input");function L(){var e=c.value,t=e.lastIndexOf(".");c.value=t>0?e.substring(0,t+1)+u.value:e+"."+u.value,"xml"===u.value?(C.setAttribute("disabled","true"),b.setAttribute("disabled","true"),y.setAttribute("disabled","true"),R.setAttribute("disabled","true")):(C.removeAttribute("disabled"),b.removeAttribute("disabled"),y.removeAttribute("disabled"),R.removeAttribute("disabled")),"png"===u.value||"svg"===u.value||"pdf"===u.value?S.removeAttribute("disabled"):S.setAttribute("disabled","disabled"),"png"===u.value?(f.removeAttribute("disabled"),D.removeAttribute("disabled")):(f.setAttribute("disabled","disabled"),D.setAttribute("disabled","disabled"))}function I(){b.value*y.value>MAX_AREA||b.value<=0?b.style.backgroundColor="red":b.style.backgroundColor="",b.value*y.value>MAX_AREA||y.value<=0?y.style.backgroundColor="red":y.style.backgroundColor=""}R.setAttribute("type","number"),R.setAttribute("value",ExportDialog.lastBorderValue),R.style.width="180px",(l=document.createElement("td")).appendChild(R),t.appendChild(l),s.appendChild(t),d.appendChild(s),mxEvent.addListener(u,"change",L),L(),mxEvent.addListener(C,"change",(function(){U=!0;var e=Math.max(0,parseFloat(C.value)||100)/100;C.value=parseFloat((100*e).toFixed(2)),o>0?(b.value=Math.floor(o*e),y.value=Math.floor(r*e)):(C.value="100",b.value=o,y.value=r),I()})),mxEvent.addListener(b,"change",(function(){var e=parseInt(b.value)/o;e>0?(C.value=parseFloat((100*e).toFixed(2)),y.value=Math.floor(r*e)):(C.value="100",b.value=o,y.value=r),I()})),mxEvent.addListener(y,"change",(function(){var e=parseInt(y.value)/r;e>0?(C.value=parseFloat((100*e).toFixed(2)),b.value=Math.floor(o*e)):(C.value="100",b.value=o,y.value=r),I()})),t=document.createElement("tr"),(l=document.createElement("td")).setAttribute("align","right"),l.style.paddingTop="22px",l.colSpan=2;var B=mxUtils.button(mxResources.get("export"),mxUtils.bind(this,(function(){if(parseInt(C.value)<=0)mxUtils.alert(mxResources.get("drawingEmpty"));else{var t=c.value,l=u.value,n=Math.max(0,parseFloat(C.value)||100)/100,a=Math.max(0,parseInt(R.value)),o=i.background,r=Math.max(1,parseInt(D.value));"svg"!=l&&"png"!=l&&"pdf"!=l||!S.checked?null!=o&&o!=mxConstants.NONE||(o="#ffffff"):o=null,ExportDialog.lastBorderValue=a,ExportDialog.exportFile(e,t,l,o,n,a,r)}})));B.className="geBtn gePrimaryBtn";var N=mxUtils.button(mxResources.get("cancel"),(function(){e.hideDialog()}));N.className="geBtn",e.editor.cancelFirst?(l.appendChild(N),l.appendChild(B)):(l.appendChild(B),l.appendChild(N)),t.appendChild(l),s.appendChild(t),d.appendChild(s),this.container=d};ExportDialog.lastBorderValue=0,ExportDialog.showGifOption=!0,ExportDialog.showXmlOption=!0,ExportDialog.exportFile=function(e,t,l,i,n,a,o){var r=e.editor.graph;if("xml"==l)ExportDialog.saveLocalFile(e,mxUtils.getXml(e.editor.getGraphXml()),t,l);else if("svg"==l)ExportDialog.saveLocalFile(e,mxUtils.getXml(r.getSvg(i,n,a)),t,l);else{var d=r.getGraphBounds(),s=mxUtils.createXmlDocument(),c=s.createElement("output");s.appendChild(c);var u=new mxXmlCanvas2D(c);u.translate(Math.floor((a/n-d.x)/r.view.scale),Math.floor((a/n-d.y)/r.view.scale)),u.scale(n/r.view.scale),(new mxImageExport).drawState(r.getView().getState(r.model.root),u);var p="xml="+encodeURIComponent(mxUtils.getXml(c)),m=Math.ceil(d.width*n/r.view.scale+2*a),g=Math.ceil(d.height*n/r.view.scale+2*a);if(p.length<=MAX_REQUEST_SIZE&&m*g<MAX_AREA)e.hideDialog(),new mxXmlRequest(EXPORT_URL,"format="+l+"&filename="+encodeURIComponent(t)+"&bg="+(null!=i?i:"none")+"&w="+m+"&h="+g+"&"+p+"&dpi="+o).simulate(document,"_blank");else mxUtils.alert(mxResources.get("drawingTooLarge"))}},ExportDialog.saveLocalFile=function(e,t,l,i){t.length<MAX_REQUEST_SIZE?(e.hideDialog(),new mxXmlRequest(SAVE_URL,"xml="+encodeURIComponent(t)+"&filename="+encodeURIComponent(l)+"&format="+i).simulate(document,"_blank")):(mxUtils.alert(mxResources.get("drawingTooLarge")),mxUtils.popup(xml))};var EditDataDialog=function(e,t){var l=document.createElement("div"),i=e.editor.graph,n=i.getModel().getValue(t);if(!mxUtils.isNode(n)){var a=mxUtils.createXmlDocument().createElement("object");a.setAttribute("label",n||""),n=a}var o={};try{null!=(h=mxUtils.getValue(e.editor.graph.getCurrentCellStyle(t),"metaData",null))&&(o=JSON.parse(h))}catch(e){}var r=new mxForm("properties");r.table.style.width="100%";for(var d=n.attributes,s=[],c=[],u=0,p=null!=EditDataDialog.getDisplayIdForCell?EditDataDialog.getDisplayIdForCell(e,t):null,m=function(e,t){var l=document.createElement("div");l.style.position="relative",l.style.paddingRight="20px",l.style.boxSizing="border-box",l.style.width="100%";var i=document.createElement("a"),n=mxUtils.createImage(Dialog.prototype.closeImage);n.style.height="9px",n.style.fontSize="9px",n.style.marginBottom=mxClient.IS_IE11?"-1px":"5px",i.className="geButton",i.setAttribute("title",mxResources.get("delete")),i.style.position="absolute",i.style.top="4px",i.style.right="0px",i.style.margin="0px",i.style.width="9px",i.style.height="9px",i.style.cursor="pointer",i.appendChild(n);var a=function(e){return function(){for(var t=0,l=0;l<s.length;l++){if(s[l]==e){c[l]=null,r.table.deleteRow(t+(null!=p?1:0));break}null!=c[l]&&t++}}}(t);mxEvent.addListener(i,"click",a);var o=e.parentNode;l.appendChild(e),l.appendChild(i),o.appendChild(l)},g=function(e,t,l){s[e]=t,c[e]=r.addTextarea(s[u]+":",l,2),c[e].style.width="100%",l.indexOf("\n")>0&&c[e].setAttribute("rows","2"),m(c[e],t),null!=o[t]&&0==o[t].editable&&c[e].setAttribute("disabled","disabled")},h=[],x=i.getModel().getParent(t)==i.getModel().getRoot(),v=0;v<d.length;v++)!x&&"label"==d[v].nodeName||"placeholders"==d[v].nodeName||h.push({name:d[v].nodeName,value:d[v].nodeValue});if(h.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),null!=p){var C=document.createElement("div");C.style.width="100%",C.style.fontSize="11px",C.style.textAlign="center",mxUtils.write(C,p),r.addField(mxResources.get("id")+":",C)}for(v=0;v<h.length;v++)g(u,h[v].name,h[v].value),u++;var b=document.createElement("div");b.style.cssText="position:absolute;left:30px;right:30px;overflow-y:auto;top:30px;bottom:80px;",b.appendChild(r.table);var y=document.createElement("div");y.style.boxSizing="border-box",y.style.paddingRight="160px",y.style.whiteSpace="nowrap",y.style.marginTop="6px",y.style.width="100%";var f=document.createElement("input");f.setAttribute("placeholder",mxResources.get("enterPropertyName")),f.setAttribute("type","text"),f.setAttribute("size",mxClient.IS_IE||mxClient.IS_IE11?"36":"40"),f.style.boxSizing="border-box",f.style.marginLeft="2px",f.style.width="100%",y.appendChild(f),b.appendChild(y),l.appendChild(b);var E=mxUtils.button(mxResources.get("addProperty"),(function(){var e=f.value;if(e.length>0&&"label"!=e&&"placeholders"!=e&&e.indexOf(":")<0)try{var t=mxUtils.indexOf(s,e);if(t>=0&&null!=c[t])c[t].focus();else{n.cloneNode(!1).setAttribute(e,""),t>=0&&(s.splice(t,1),c.splice(t,1)),s.push(e);var l=r.addTextarea(e+":","",2);l.style.width="100%",c.push(l),m(l,e),l.focus()}E.setAttribute("disabled","disabled"),f.value=""}catch(e){mxUtils.alert(e)}else mxUtils.alert(mxResources.get("invalidName"))}));this.init=function(){c.length>0?c[0].focus():f.focus()},E.setAttribute("title",mxResources.get("addProperty")),E.setAttribute("disabled","disabled"),E.style.textOverflow="ellipsis",E.style.position="absolute",E.style.overflow="hidden",E.style.width="144px",E.style.right="0px",E.className="geBtn",y.appendChild(E);var w=mxUtils.button(mxResources.get("cancel"),(function(){e.hideDialog.apply(e,arguments)}));w.className="geBtn";var F=mxUtils.button(mxResources.get("apply"),(function(){try{e.hideDialog.apply(e,arguments),n=n.cloneNode(!0);for(var l=!1,a=0;a<s.length;a++)null==c[a]?n.removeAttribute(s[a]):(n.setAttribute(s[a],c[a].value),l=l||"placeholder"==s[a]&&"1"==n.getAttribute("placeholders"));l&&n.removeAttribute("label"),i.getModel().setValue(t,n)}catch(e){mxUtils.alert(e)}}));function A(){f.value.length>0?E.removeAttribute("disabled"):E.setAttribute("disabled","disabled")}F.className="geBtn gePrimaryBtn",mxEvent.addListener(f,"keyup",A),mxEvent.addListener(f,"change",A);var k=document.createElement("div");if(k.style.cssText="position:absolute;left:30px;right:30px;text-align:right;bottom:30px;height:40px;",e.editor.graph.getModel().isVertex(t)||e.editor.graph.getModel().isEdge(t)){var D=document.createElement("span");D.style.marginRight="10px";var U=document.createElement("input");if(U.setAttribute("type","checkbox"),U.style.marginRight="6px","1"==n.getAttribute("placeholders")&&(U.setAttribute("checked","checked"),U.defaultChecked=!0),mxEvent.addListener(U,"click",(function(){"1"==n.getAttribute("placeholders")?n.removeAttribute("placeholders"):n.setAttribute("placeholders","1")})),D.appendChild(U),mxUtils.write(D,mxResources.get("placeholders")),null!=EditDataDialog.placeholderHelpLink){var S=document.createElement("a");S.setAttribute("href",EditDataDialog.placeholderHelpLink),S.setAttribute("title",mxResources.get("help")),S.setAttribute("target","_blank"),S.style.marginLeft="8px",S.style.cursor="help";var R=document.createElement("img");mxUtils.setOpacity(R,50),R.style.height="16px",R.style.width="16px",R.setAttribute("border","0"),R.setAttribute("valign","middle"),R.style.marginTop=mxClient.IS_IE11?"0px":"-4px",R.setAttribute("src",Editor.helpImage),S.appendChild(R),D.appendChild(S)}k.appendChild(D)}e.editor.cancelFirst?(k.appendChild(w),k.appendChild(F)):(k.appendChild(F),k.appendChild(w)),l.appendChild(k),this.container=l};EditDataDialog.getDisplayIdForCell=function(e,t){var l=null;return null!=e.editor.graph.getModel().getParent(t)&&(l=t.getId()),l},EditDataDialog.placeholderHelpLink=null;var LinkDialog=function(e,t,l,i){var n=document.createElement("div");mxUtils.write(n,mxResources.get("editLink")+":");var a=document.createElement("div");a.className="geTitle",a.style.backgroundColor="transparent",a.style.borderColor="transparent",a.style.whiteSpace="nowrap",a.style.textOverflow="clip",a.style.cursor="default",mxClient.IS_VML||(a.style.paddingRight="20px");var o=document.createElement("input");o.setAttribute("value",t),o.setAttribute("placeholder","http://www.example.com/"),o.setAttribute("type","text"),o.style.marginTop="6px",o.style.width="400px",o.style.backgroundImage="url('"+Dialog.prototype.clearImage+"')",o.style.backgroundRepeat="no-repeat",o.style.backgroundPosition="100% 50%",o.style.paddingRight="14px";var r=document.createElement("div");r.setAttribute("title",mxResources.get("reset")),r.style.position="relative",r.style.left="-16px",r.style.width="12px",r.style.height="14px",r.style.cursor="pointer",r.style.display=mxClient.IS_VML?"inline":"inline-block",r.style.top=(mxClient.IS_VML?0:3)+"px",r.style.background="url("+IMAGE_PATH+"/transparent.gif)",mxEvent.addListener(r,"click",(function(){o.value="",o.focus()})),a.appendChild(o),a.appendChild(r),n.appendChild(a),this.init=function(){o.focus(),mxClient.IS_GC||mxClient.IS_FF||document.documentMode>=5||mxClient.IS_QUIRKS?o.select():document.execCommand("selectAll",!1,null)};var d=document.createElement("div");d.style.marginTop="18px",d.style.textAlign="right",mxEvent.addListener(o,"keypress",(function(t){13==t.keyCode&&(e.hideDialog(),i(o.value))}));var s=mxUtils.button(mxResources.get("cancel"),(function(){e.hideDialog()}));s.className="geBtn",e.editor.cancelFirst&&d.appendChild(s);var c=mxUtils.button(l,(function(){e.hideDialog(),i(o.value)}));c.className="geBtn gePrimaryBtn",d.appendChild(c),e.editor.cancelFirst||d.appendChild(s),n.appendChild(d),this.container=n},OutlineWindow=function(e,t,l,i,n){var a=e.editor.graph,o=document.createElement("div");o.style.position="absolute",o.style.width="100%",o.style.height="100%",o.style.border="1px solid whiteSmoke",o.style.overflow="hidden",this.window=new mxWindow(mxResources.get("outline"),o,t,l,i,n,!0,!0),this.window.minimumSize=new mxRectangle(0,0,80,80),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.window.setLocation=function(e,t){var l=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,i=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;e=Math.max(0,Math.min(e,l-this.table.clientWidth)),t=Math.max(0,Math.min(t,i-this.table.clientHeight-48)),this.getX()==e&&this.getY()==t||mxWindow.prototype.setLocation.apply(this,arguments)};var r=mxUtils.bind(this,(function(){var e=this.window.getX(),t=this.window.getY();this.window.setLocation(e,t)}));mxEvent.addListener(window,"resize",r);var d=e.createOutline(this.window);this.destroy=function(){mxEvent.removeListener(window,"resize",r),this.window.destroy(),d.destroy()},this.window.addListener(mxEvent.RESIZE,mxUtils.bind(this,(function(){d.update(!1),d.outline.sizeDidChange()}))),this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,(function(){this.window.fit(),d.suspended=!1,d.outline.refresh(),d.update()}))),this.window.addListener(mxEvent.HIDE,mxUtils.bind(this,(function(){d.suspended=!0}))),this.window.addListener(mxEvent.NORMALIZE,mxUtils.bind(this,(function(){d.suspended=!1,d.update()}))),this.window.addListener(mxEvent.MINIMIZE,mxUtils.bind(this,(function(){d.suspended=!0})));var s=d.createGraph;function c(){d.outline.pageScale=a.pageScale,d.outline.pageFormat=a.pageFormat,d.outline.pageVisible=a.pageVisible,d.outline.background=null==a.background||a.background==mxConstants.NONE?a.defaultPageBackgroundColor:a.background;var e=mxUtils.getCurrentStyle(a.container);o.style.backgroundColor=e.backgroundColor,null!=a.view.backgroundPageShape&&null!=d.outline.view.backgroundPageShape&&(d.outline.view.backgroundPageShape.fill=a.view.backgroundPageShape.fill),d.outline.refresh()}if(d.createGraph=function(e){var t=s.apply(this,arguments);t.gridEnabled=!1,t.pageScale=a.pageScale,t.pageFormat=a.pageFormat,t.background=null==a.background||a.background==mxConstants.NONE?a.defaultPageBackgroundColor:a.background,t.pageVisible=a.pageVisible;var l=mxUtils.getCurrentStyle(a.container);return o.style.backgroundColor=l.backgroundColor,t},d.init(o),e.editor.addListener("resetGraphView",c),e.addListener("pageFormatChanged",c),e.addListener("backgroundColorChanged",c),e.addListener("backgroundImageChanged",c),e.addListener("pageViewChanged",(function(){c(),d.update(!0)})),d.outline.dialect==mxConstants.DIALECT_SVG){var u=e.actions.get("zoomIn"),p=e.actions.get("zoomOut");mxEvent.addMouseWheelListener((function(e,t){for(var l=!1,i=mxEvent.getSource(e);null!=i;){if(i==d.outline.view.canvas.ownerSVGElement){l=!0;break}i=i.parentNode}l&&(t?u.funct():p.funct())}))}},LayersWindow=function(e,t,l,i,n){var a=e.editor.graph,o=document.createElement("div");o.style.userSelect="none",o.style.background="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor,o.style.border="1px solid whiteSmoke",o.style.height="100%",o.style.marginBottom="10px",o.style.overflow="auto";var r=EditorUi.compactUi?"26px":"30px",d=document.createElement("div");d.style.backgroundColor="white"==Dialog.backdropColor?"#dcdcdc":Dialog.backdropColor,d.style.position="absolute",d.style.overflow="auto",d.style.left="0px",d.style.right="0px",d.style.top="0px",d.style.bottom=parseInt(r)+7+"px",o.appendChild(d);var s=null,c=null;mxEvent.addListener(o,"dragover",(function(e){e.dataTransfer.dropEffect="move",c=0,e.stopPropagation(),e.preventDefault()})),mxEvent.addListener(o,"drop",(function(e){e.stopPropagation(),e.preventDefault()}));var u=null,p=null,m=document.createElement("div");m.className="geToolbarContainer",m.style.position="absolute",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.style.height=r,m.style.overflow="hidden",m.style.padding=EditorUi.compactUi?"4px 0px 3px 0px":"1px",m.style.backgroundColor="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor,m.style.borderWidth="1px 0px 0px 0px",m.style.borderColor="#c3c3c3",m.style.borderStyle="solid",m.style.display="block",m.style.whiteSpace="nowrap",mxClient.IS_QUIRKS&&(m.style.filter="none");var g=document.createElement("a");g.className="geButton",mxClient.IS_QUIRKS&&(g.style.filter="none");var h=g.cloneNode();h.innerHTML='<div class="geSprite geSprite-delete" style="display:inline-block;"></div>',mxEvent.addListener(h,"click",(function(e){if(a.isEnabled()){a.model.beginUpdate();try{var t=a.model.root.getIndex(p);a.removeCells([p],!1),0==a.model.getChildCount(a.model.root)?(a.model.add(a.model.root,new mxCell),a.setDefaultParent(null)):t>0&&t<=a.model.getChildCount(a.model.root)?a.setDefaultParent(a.model.getChildAt(a.model.root,t-1)):a.setDefaultParent(null)}finally{a.model.endUpdate()}}mxEvent.consume(e)})),a.isEnabled()||(h.className="geButton mxDisabled"),m.appendChild(h);var x=g.cloneNode();x.setAttribute("title",mxUtils.trim(mxResources.get("moveSelectionTo",["..."]))),x.innerHTML='<div class="geSprite geSprite-insert" style="display:inline-block;"></div>',mxEvent.addListener(x,"click",(function(t){if(a.isEnabled()&&!a.isSelectionEmpty()){var l=mxUtils.getOffset(x);e.showPopupMenu(mxUtils.bind(this,(function(e,t){for(var l=u-1;l>=0;l--)mxUtils.bind(this,(function(l){var i=e.addItem(a.convertValueToString(l)||mxResources.get("background"),null,mxUtils.bind(this,(function(){a.moveCells(a.getSelectionCells(),0,0,!1,l)})),t);1==a.getSelectionCount()&&a.model.isAncestor(l,a.getSelectionCell())&&e.addCheckmark(i,Editor.checkmarkImage)}))(a.model.getChildAt(a.model.root,l))})),l.x,l.y+x.offsetHeight,t)}})),m.appendChild(x);var v=g.cloneNode();v.innerHTML='<div class="geSprite geSprite-dots" style="display:inline-block;"></div>',v.setAttribute("title",mxResources.get("rename")),mxEvent.addListener(v,"click",(function(t){a.isEnabled()&&e.showDataDialog(p),mxEvent.consume(t)})),a.isEnabled()||(v.className="geButton mxDisabled"),m.appendChild(v);var C=g.cloneNode();C.innerHTML='<div class="geSprite geSprite-duplicate" style="display:inline-block;"></div>',mxEvent.addListener(C,"click",(function(e){if(a.isEnabled()){var t=null;a.model.beginUpdate();try{t=a.cloneCell(p),a.cellLabelChanged(t,mxResources.get("untitledLayer")),t.setVisible(!0),t=a.addCell(t,a.model.root),a.setDefaultParent(t)}finally{a.model.endUpdate()}null==t||a.isCellLocked(t)||a.selectAll(t)}})),a.isEnabled()||(C.className="geButton mxDisabled"),m.appendChild(C);var b=g.cloneNode();function y(){function t(t,l,i,n){var o=document.createElement("div");o.className="geToolbarContainer",o.style.overflow="hidden",o.style.position="relative",o.style.padding="4px",o.style.height="22px",o.style.display="block",o.style.backgroundColor="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor,o.style.borderWidth="0px 0px 1px 0px",o.style.borderColor="#c3c3c3",o.style.borderStyle="solid",o.style.whiteSpace="nowrap",o.setAttribute("title",l);var r=document.createElement("div");r.style.display="inline-block",r.style.width="100%",r.style.textOverflow="ellipsis",r.style.overflow="hidden",mxEvent.addListener(o,"dragover",(function(e){e.dataTransfer.dropEffect="move",c=t,e.stopPropagation(),e.preventDefault()})),mxEvent.addListener(o,"dragstart",(function(e){s=o,mxClient.IS_FF&&e.dataTransfer.setData("Text","<layer/>")})),mxEvent.addListener(o,"dragend",(function(e){null!=s&&null!=c&&a.addCell(i,a.model.root,c),s=null,c=null,e.stopPropagation(),e.preventDefault()}));var m=document.createElement("img");m.setAttribute("draggable","false"),m.setAttribute("align","top"),m.setAttribute("border","0"),m.style.padding="4px",m.setAttribute("title",mxResources.get("lockUnlock"));var g=a.getCurrentCellStyle(i);"1"==mxUtils.getValue(g,"locked","0")?m.setAttribute("src",Dialog.prototype.lockedImage):m.setAttribute("src",Dialog.prototype.unlockedImage),a.isEnabled()&&(m.style.cursor="pointer"),mxEvent.addListener(m,"click",(function(e){if(a.isEnabled()){var t=null;a.getModel().beginUpdate();try{t="1"==mxUtils.getValue(g,"locked","0")?null:"1",a.setCellStyles("locked",t,[i])}finally{a.getModel().endUpdate()}"1"==t&&a.removeSelectionCells(a.getModel().getDescendants(i)),mxEvent.consume(e)}})),r.appendChild(m);var h=document.createElement("input");if(h.setAttribute("type","checkbox"),h.setAttribute("title",mxResources.get("hideIt",[i.value||mxResources.get("background")])),h.style.marginLeft="4px",h.style.marginRight="6px",h.style.marginTop="4px",r.appendChild(h),a.model.isVisible(i)&&(h.setAttribute("checked","checked"),h.defaultChecked=!0),mxEvent.addListener(h,"click",(function(e){a.model.setVisible(i,!a.model.isVisible(i)),mxEvent.consume(e)})),mxUtils.write(r,l),o.appendChild(r),a.isEnabled()){if(mxClient.IS_TOUCH||mxClient.IS_POINTER||mxClient.IS_VML||mxClient.IS_IE&&document.documentMode<10){var x=document.createElement("div");if(x.style.display="block",x.style.textAlign="right",x.style.whiteSpace="nowrap",x.style.position="absolute",x.style.right="6px",x.style.top="6px",t>0){var v=document.createElement("a");v.setAttribute("title",mxResources.get("toBack")),v.className="geButton",v.style.cssFloat="none",v.innerHTML="&#9660;",v.style.width="14px",v.style.height="14px",v.style.fontSize="14px",v.style.margin="0px",v.style.marginTop="-1px",x.appendChild(v),mxEvent.addListener(v,"click",(function(e){a.isEnabled()&&a.addCell(i,a.model.root,t-1),mxEvent.consume(e)}))}if(t>=0&&t<u-1){var C=document.createElement("a");C.setAttribute("title",mxResources.get("toFront")),C.className="geButton",C.style.cssFloat="none",C.innerHTML="&#9650;",C.style.width="14px",C.style.height="14px",C.style.fontSize="14px",C.style.margin="0px",C.style.marginTop="-1px",x.appendChild(C),mxEvent.addListener(C,"click",(function(e){a.isEnabled()&&a.addCell(i,a.model.root,t+1),mxEvent.consume(e)}))}o.appendChild(x)}mxClient.IS_SVG&&(!mxClient.IS_IE||document.documentMode>=10)&&(o.setAttribute("draggable","true"),o.style.cursor="move")}mxEvent.addListener(o,"dblclick",(function(t){var l=mxEvent.getSource(t).nodeName;"INPUT"!=l&&"IMG"!=l&&(!function(t){if(a.isEnabled()&&null!=t){var l=a.convertValueToString(t),i=new FilenameDialog(e,l||mxResources.get("background"),mxResources.get("rename"),mxUtils.bind(this,(function(e){null!=e&&a.cellLabelChanged(t,e)})),mxResources.get("enterName"));e.showDialog(i.container,300,100,!0,!0),i.init()}}(i),mxEvent.consume(t))})),a.getDefaultParent()==i?(o.style.background="white"==Dialog.backdropColor?"#e6eff8":"#505759",o.style.fontWeight=a.isEnabled()?"bold":"",p=i):mxEvent.addListener(o,"click",(function(e){a.isEnabled()&&(a.setDefaultParent(n),a.view.setCurrentRoot(null))})),d.appendChild(o)}u=a.model.getChildCount(a.model.root),d.innerHTML="";for(var l=u-1;l>=0;l--)mxUtils.bind(this,(function(e){t(l,a.convertValueToString(e)||mxResources.get("background"),e,e)}))(a.model.getChildAt(a.model.root,l));var i=a.convertValueToString(p)||mxResources.get("background");h.setAttribute("title",mxResources.get("removeIt",[i])),C.setAttribute("title",mxResources.get("duplicateIt",[i])),v.setAttribute("title",mxResources.get("editData")),a.isSelectionEmpty()&&(x.className="geButton mxDisabled")}b.innerHTML='<div class="geSprite geSprite-plus" style="display:inline-block;"></div>',b.setAttribute("title",mxResources.get("addLayer")),mxEvent.addListener(b,"click",(function(e){if(a.isEnabled()){a.model.beginUpdate();try{var t=a.addCell(new mxCell(mxResources.get("untitledLayer")),a.model.root);a.setDefaultParent(t)}finally{a.model.endUpdate()}}mxEvent.consume(e)})),a.isEnabled()||(b.className="geButton mxDisabled"),m.appendChild(b),o.appendChild(m),y(),a.model.addListener(mxEvent.CHANGE,y),a.addListener("defaultParentChanged",y),a.selectionModel.addListener(mxEvent.CHANGE,(function(){a.isSelectionEmpty()?x.className="geButton mxDisabled":x.className="geButton"})),this.window=new mxWindow(mxResources.get("layers"),o,t,l,i,n,!0,!0),this.window.minimumSize=new mxRectangle(0,0,120,120),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.init=function(){d.scrollTop=d.scrollHeight-d.clientHeight},this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,(function(){this.window.fit()}))),this.refreshLayers=y,this.window.setLocation=function(e,t){var l=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,i=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;e=Math.max(0,Math.min(e,l-this.table.clientWidth)),t=Math.max(0,Math.min(t,i-this.table.clientHeight-48)),this.getX()==e&&this.getY()==t||mxWindow.prototype.setLocation.apply(this,arguments)};var f=mxUtils.bind(this,(function(){var e=this.window.getX(),t=this.window.getY();this.window.setLocation(e,t)}));mxEvent.addListener(window,"resize",f),this.destroy=function(){mxEvent.removeListener(window,"resize",f),this.window.destroy()}};