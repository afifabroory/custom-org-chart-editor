/**
 * Copyright (c) 2006-2012, JGraph Ltd
 */
function Dialog(e,t,i,a,n,l,r,A,o,g,s){var h=0;mxClient.IS_VML&&(null==document.documentMode||document.documentMode<8)&&(h=80);var d=i+=h,p=a+=h,c=mxUtils.getDocumentSize();null!=window.innerHeight&&(c.height=window.innerHeight);var u=c.height,m=Math.max(1,Math.round((c.width-i-64)/2)),b=Math.max(1,Math.round((u-a-e.footerHeight)/3));mxClient.IS_QUIRKS||(t.style.maxHeight="100%"),i=null!=document.body?Math.min(i,document.body.scrollWidth-64):i,a=Math.min(a,u-64),e.dialogs.length>0&&(this.zIndex+=2*e.dialogs.length),null==this.bg&&(this.bg=e.createDiv("background"),this.bg.style.position="absolute",this.bg.style.background=Dialog.backdropColor,this.bg.style.height=u+"px",this.bg.style.right="0px",this.bg.style.zIndex=this.zIndex-2,mxUtils.setOpacity(this.bg,this.bgOpacity),mxClient.IS_QUIRKS&&new mxDivResizer(this.bg));var $=mxUtils.getDocumentScrollOrigin(document);this.bg.style.left=$.x+"px",this.bg.style.top=$.y+"px",m+=$.x,b+=$.y,n&&document.body.appendChild(this.bg);var y=e.createDiv(o?"geTransDialog":"geDialog"),v=this.getPosition(m,b,i,a);if(m=v.x,b=v.y,y.style.width=i+"px",y.style.height=a+"px",y.style.left=m+"px",y.style.top=b+"px",y.style.zIndex=this.zIndex,y.appendChild(t),document.body.appendChild(y),!A&&t.clientHeight>y.clientHeight-64&&(t.style.overflowY="auto"),l){var w=document.createElement("img");if(w.setAttribute("src",Dialog.prototype.closeImage),w.setAttribute("title",mxResources.get("close")),w.className="geDialogClose",w.style.top=b+14+"px",w.style.left=m+i+38-h+"px",w.style.zIndex=this.zIndex,mxEvent.addListener(w,"click",mxUtils.bind(this,function(){e.hideDialog(!0)})),document.body.appendChild(w),this.dialogImg=w,!s){var M=!1;mxEvent.addGestureListeners(this.bg,mxUtils.bind(this,function(e){M=!0}),null,mxUtils.bind(this,function(t){M&&(e.hideDialog(!0),M=!1)}))}}this.resizeListener=mxUtils.bind(this,function(){if(null!=g){var n=g();null!=n&&(d=i=n.w,p=a=n.h)}var l=mxUtils.getDocumentSize();u=l.height,this.bg.style.height=u+"px",m=Math.max(1,Math.round((l.width-i-64)/2)),b=Math.max(1,Math.round((u-a-e.footerHeight)/3)),i=null!=document.body?Math.min(d,document.body.scrollWidth-64):d,a=Math.min(p,u-64);var r=this.getPosition(m,b,i,a);m=r.x,b=r.y,y.style.left=m+"px",y.style.top=b+"px",y.style.width=i+"px",y.style.height=a+"px",!A&&t.clientHeight>y.clientHeight-64&&(t.style.overflowY="auto"),null!=this.dialogImg&&(this.dialogImg.style.top=b+14+"px",this.dialogImg.style.left=m+i+38-h+"px")}),mxEvent.addListener(window,"resize",this.resizeListener),this.onDialogClose=r,this.container=y,e.editor.fireEvent(new mxEventObject("showDialog"))}(Editor=function(e,t,i,a,n){mxEventSource.call(this),this.chromeless=null!=e?e:this.chromeless,this.initStencilRegistry(),this.graph=a||this.createGraph(t,i),this.editable=null!=n?n:!e,this.undoManager=this.createUndoManager(),this.status="",this.getOrCreateFilename=function(){return this.filename||mxResources.get("drawing",[Editor.pageCounter])+".xml"},this.getFilename=function(){return this.filename},this.setStatus=function(e){this.status=e,this.fireEvent(new mxEventObject("statusChanged"))},this.getStatus=function(){return this.status},this.graphChangeListener=function(e,t){var i=null!=t?t.getProperty("edit"):null;null!=i&&i.ignoreEdit||this.setModified(!0)},this.graph.getModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){this.graphChangeListener.apply(this,arguments)})),this.graph.resetViewOnRootChange=!1,this.init()}).pageCounter=0,function(){try{for(var e=window;null!=e.opener&&void 0!==e.opener.Editor&&!isNaN(e.opener.Editor.pageCounter)&&e.opener!=e;)e=e.opener;null!=e&&(e.Editor.pageCounter++,Editor.pageCounter=e.Editor.pageCounter)}catch(t){}}(),Editor.useLocalStorage="undefined"!=typeof Storage&&mxClient.IS_IOS,Editor.moveImage=mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI4cHgiIGhlaWdodD0iMjhweCI+PGc+PC9nPjxnPjxnPjxnPjxwYXRoIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNCwyLjQpc2NhbGUoMC44KXJvdGF0ZSg0NSwxMiwxMikiIHN0cm9rZT0iIzI5YjZmMiIgZmlsbD0iIzI5YjZmMiIgZD0iTTE1LDNsMi4zLDIuM2wtMi44OSwyLjg3bDEuNDIsMS40MkwxOC43LDYuN0wyMSw5VjNIMTV6IE0zLDlsMi4zLTIuM2wyLjg3LDIuODlsMS40Mi0xLjQyTDYuNyw1LjNMOSwzSDNWOXogTTksMjEgbC0yLjMtMi4zbDIuODktMi44N2wtMS40Mi0xLjQyTDUuMywxNy4zTDMsMTV2Nkg5eiBNMjEsMTVsLTIuMywyLjNsLTIuODctMi44OWwtMS40MiwxLjQybDIuODksMi44N0wxNSwyMWg2VjE1eiIvPjwvZz48L2c+PC9nPjwvc3ZnPgo=":IMAGE_PATH+"/move.png",Editor.rowMoveImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAEBAMAAACw6DhOAAAAGFBMVEUzMzP///9tbW1QUFCKiopBQUF8fHxfX1/IXlmXAAAAFElEQVQImWNgNVdzYBAUFBRggLMAEzYBy29kEPgAAAAASUVORK5CYII=":IMAGE_PATH+"/thumb_horz.png",Editor.helpImage=mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDI0djI0SDB6Ii8+PHBhdGggZD0iTTExIDE4aDJ2LTJoLTJ2MnptMS0xNkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6bTAtMTRjLTIuMjEgMC00IDEuNzktNCA0aDJjMC0xLjEuOS0yIDItMnMyIC45IDIgMmMwIDItMyAxLjc1LTMgNWgyYzAtMi4yNSAzLTIuNSAzLTUgMC0yLjIxLTEuNzktNC00LTR6Ii8+PC9zdmc+":IMAGE_PATH+"/help.png",Editor.checkmarkImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhFQAVAMQfAGxsbHx8fIqKioaGhvb29nJycvr6+sDAwJqamltbW5OTk+np6YGBgeTk5Ly8vJiYmP39/fLy8qWlpa6ursjIyOLi4vj4+N/f3+3t7fT09LCwsHZ2dubm5r6+vmZmZv///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEY4NTZERTQ5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEY4NTZERTU5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Rjg1NkRFMjlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Rjg1NkRFMzlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAB8ALAAAAAAVABUAAAVI4CeOZGmeaKqubKtylktSgCOLRyLd3+QJEJnh4VHcMoOfYQXQLBcBD4PA6ngGlIInEHEhPOANRkaIFhq8SuHCE1Hb8Lh8LgsBADs=":IMAGE_PATH+"/checkmark.gif",Editor.maximizeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAAAAAAAAAAAAAAAADgKxmiAAAABXRSTlMA758vX1Pw3BoAAABJSURBVAjXY8AJQkODGBhUQ0MhbAUGBiYY24CBgRnGFmZgMISwgwwDGRhEhVVBbAVmEQYGRwMmBjIAQi/CTIRd6G5AuA3dzYQBAHj0EFdHkvV4AAAAAElFTkSuQmCC",Editor.zoomOutImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAsLCxxcXEhISFgYGChjTUxAAAAAXRSTlMAQObYZgAAAEdJREFUCNdjIAMwCQrB2YKCggJQJqMwA7MglK1owMBgqABVApITgLJZXFxgbIQ4Qj3CHIT5ggoIe5kgNkM1KSDYKBKqxPkDAPo5BAZBE54hAAAAAElFTkSuQmCC",Editor.zoomInImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAsLCwhISFxcXFgYGBavKaoAAAAAXRSTlMAQObYZgAAAElJREFUCNdjIAMwCQrB2YKCggJQJqMIA4sglK3owMzgqABVwsDMwCgAZTMbG8PYCHGEeoQ5CPMFFRD2MkFshmpSQLBRJFSJ8wcAEqcEM2uhl2MAAAAASUVORK5CYII=",Editor.zoomFitImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAD1BMVEUAAAAAAAAwMDBwcHBgYGC1xl09AAAAAXRSTlMAQObYZgAAAEFJREFUCNdjIAMwCQrB2YKCggJQJqMwA7MglK1owMBgqABVApITwMdGqEeYgzBfUAFhLxPEZqgmBQQbRUKFOH8AAK5OA3lA+FFOAAAAAElFTkSuQmCC",Editor.layersImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAMAAACeyVWkAAAAaVBMVEUAAAAgICAICAgdHR0PDw8WFhYICAgLCwsXFxcvLy8ODg4uLi4iIiIqKiokJCQYGBgKCgonJycFBQUCAgIqKiocHBwcHBwODg4eHh4cHBwnJycJCQkUFBQqKiojIyMuLi4ZGRkgICAEBATOWYXAAAAAGnRSTlMAD7+fnz8/H7/ff18/77+vr5+fn39/b28fH2xSoKsAAACQSURBVBjTrYxJEsMgDARZZMAY73sgCcn/HxnhKtnk7j6oRq0psfuoyndZ/SuODkHPLzfVT6KeyPePnJ7KrnkRjWMXTn4SMnN8mXe2SSM3ts8L/ZUxxrbAULSYJJULE0Iw9pjpenoICcgcX61mGgTgtCv9Be99pzCoDhNQWQnchD1mup5++CYGcoQexajZbfwAj/0MD8ZOaUgAAAAASUVORK5CYII=",Editor.previousImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAAh0lEQVQ4je3UsQnCUBCA4U8hpa1NsoEjpHQJS0dxADdwEMuMIJkgA1hYChbGQgMi+JC8q4L/AB/vDu7x74cWWEZhJU44RmA1zujR5GIbXF9YNrjD/Q0bDRY4fEBZ4P4LlgTnCbAf84pUM8/9hY08tMUtEoQ1LpEgrNBFglChFXR6Q6GfwwR6AGKJMF74Vtt3AAAAAElFTkSuQmCC",Editor.nextImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAAi0lEQVQ4jeXUIQ7CUAwA0MeGxWI2yylwnALJUdBcgYvM7QYLmjOQIAkIPmJZghiIvypoUtX0tfnJL38X5ZfaEgUeUcManFBHgS0SLlhHggk3bCPBhCf2keCQR8wjwYTDp6YiZxJmOU1jGw7vGALescuBxsArNlOwd/CM1VSM/ut1qCIw+uOwiMJ+OF4CQzBCXm3hyAAAAABJRU5ErkJggg==",Editor.editImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhCwALAIABAFdXV////yH5BAEAAAEALAAAAAALAAsAAAIZjB8AiKuc4jvLOGqzrjX6zmkWyChXaUJBAQA7":IMAGE_PATH+"/edit.gif",Editor.zoomOutLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABJklEQVQ4y4WT2XaDMAxEvWD2nSSUNEnTJN3r//+9Sj7ILAY6L0ijC4ONYVZRpo6cByrz2YKSUGorGTpz71lPVHvT+avoB5wIkU/mxk8veceSuNoLg44IzziXjvpih72wKQnm8yc2UoiP/LAd8jQfe2Xf4Pq+2EyYIvv9wbzHHCgwxDdlBtWZOdqDfTCVgqpygQpsZaojVAVc9UjQxnAJDIBhiQv84tq3gMQCAVTxVoSibXJf8tMuc7e1TB/DCmejBNg/w1Y3c+AM5vv4w7xM59/oXamrHaLVqPQ+OTCnmMZxgz0SdL5zji0/ld6j88qGa5KIiBB6WeJGKfUKwSMKLuXgvl1TW0tm5R9UQL/efSDYsnzxD8CinhBsTTdugJatKpJwf8v+ADb8QmvW7AeAAAAAAElFTkSuQmCC",Editor.zoomInLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABKElEQVQ4y4WT6WKCMBCENwkBwn2oFKvWqr3L+79es4EkQIDOH2d3Pxk2ABiJlB8JCXjqw4LikHVGLHTm3nM3UeVN5690GBBN0GwyV/3kkrUQR+WeKnREeKpzaXWd77CmJiXGfPIEI4V4yQ9TIW/ntlcMBe731Vts9w5TWG8F5j3mQI4hvrKpdGeYA7CX9qAcl650gVJartxRuhyHVghF8idQAIbFLvCLu28BsQEC6aKtCK6Pyb3JT7PmbmtNH8Ny56CotD/2qOs5cJbuffxgXmCib+xddVU5RNOhkvvkhTlFehzVWCOh3++MYElOhfdovaImnRYVmqDdsuhNp1QrBBE6uGC2+3ZNjGdg5B94oD+9uyVgWT79BwAxEBTWdOu3bWBVgsn/N/AHUD9IC01Oe40AAAAASUVORK5CYII=",Editor.actualSizeLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABIUlEQVQ4y4WT2XqDIBCFBxDc9yTWNEnTJN3r+79eGT4BEbXnaubMr8dBBaM450dCQp4LWFAascGIRd48eB4cNYE7f6XjgGiCFs5c+dml6CFN6j1V6IQIlHPpdV/usKcmJcV88gQTRXjLD9Mhb+fWq8YG9/uCmTCFjeeDeY85UGKIUGUuqzN42kv7oCouq9oHamlzVR1lVfpAIu1QVRiW+sAv7r4FpAYIZZVsRXB9TP5Dfpo1d1trCgzz1iiptH/sUbdz4CzN9+mLeXHn3+hdddd4RDegsrvzwZwSs2GLPRJidAqCLTlVwaMPqpYMWjTWBB2WRW86pVkhSKyDK2bdt2tmagZG4sBD/evdLQHLEvQfAOKRoLCmG1FAB6uKmby+gz+REDn7O5+EwQAAAABJRU5ErkJggg==",Editor.printLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAXVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9RKvvlAAAAHnRSTlMAydnl77qbMLT093H7K4Nd4Ktn082+lYt5bkklEgP44nQSAAAApUlEQVQ4y73P2Q6DIBRF0cOgbRHHzhP//5m9mBAQKjG1cT0Yc7ITAMu1LNQgUZiQ2DYoNQ0sCQb6qgHAfRx48opq3J9AZ6xuF7uOew8Ik1OsCZRS2UAC9V+D9a+QZYxNA45YFQftPtSkATOhw7dAc0vPBwKWiIOjP0JZ0yMuQJ27g36DipOUsqRAM0dR8KD1/ILHaHSE/w8DIx09E3g/BTce6rHUB5sAPKvfF+JdAAAAAElFTkSuQmCC",Editor.layersLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAmVBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+/v7///+bnZkkAAAAMnRSTlMABPr8ByiD88KsTi/rvJb272mjeUA1CuPe1M/KjVxYHxMP6KZ0S9nYzGRGGRaznpGIbzaGUf0AAAHESURBVDjLbZLZYoIwEEVDgLCjbKIgAlqXqt3m/z+uNwu1rcyDhjl3ktnYL7OY254C0VX3yWFZfzDrOClbbgKxi0YDHjwl4jbnRkXxJS/C1YP3DbBhD1n7Ex4uaAqdVDb3yJ/4J/3nJD2to/ngQz/DfUvzMp4JJ5sSCaF5oXmemgQDfDxzbi+Kq4sU+vNcuAmx94JtyOP2DD4Epz2asWSCz4Z/4fECxyNj9zC9xNLHcdPEO+awDKeSaUu0W4twZQiO2hYVisTR3RCtK/c1X6t4xMEpiGqXqVntEBLolkZZsKY4QtwH6jzq67dEHlJysB1aNOD3XT7n1UkasQN59L4yC2RELMDSeCRtz3yV22Ub3ozIUTknYx8JWqDdQxbUes98cR2kZtUSveF/bAhcedwEWmlxIkpZUy4XOCb6VBjjxHvbwo/1lBAHHi2JCr0NI570QhyHq/DhJoE2lLgyA4RVe6KmZ47O/3b86MCP0HWa73A8/C3SUc5Qc1ajt6fgpXJ+RGpMvDSchepZDOOQRcZVIKcK90x2D7etqtI+56+u6n3sPriO6nfphitR4+O2m3EbM7lh3me1FM1o+LMI887rN+s3/wZdTFlpNVJiOAAAAABJRU5ErkJggg==",Editor.closeLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAUVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////8IN+deAAAAGnRSTlMAuvAIg/dDM/QlOeuFhj0S5s4vKgzjxJRQNiLSey0AAADNSURBVDjLfZLbEoMgDEQjRRRs1XqX///QNmOHJSnjPkHOGR7IEmeoGtJZstnwjqbRfIsmgEdtPCqe9Ynz7ZSc07rE2QiSc+qv8TvjRXA2PDUm3dpe82iJhOEUfxJJo3aCv+jKmRmH4lcCjCjeh9GWOdL/GZZkXH3PYYDrHBnfc4D/RVZf5sjoC1was+Y6HQxwaUxFvq/a0Pv343VCTxfBSRiB+ab3M3eiQZXmMNBJ3Y8pGRZtYQ7DgHMXJEdPLTaN/qBjzJOBc3nmNcbsA16bMR0oLqf+AAAAAElFTkSuQmCC",Editor.editLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAgVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9d3yJTAAAAKnRSTlMA+hzi3nRQWyXzkm0h2j3u54gzEgSXjlYoTBgJxL2loGpAOS3Jt7Wxm35Ga7gRAAAA6UlEQVQ4y63Q2XaCMBSF4Q0JBasoQ5DJqbXjfv8HbCK2BZNwo/8FXHx7rcMC7lQu0iX8qU/qtvAWCpoqH8dYzS0SwaV5eK/UAf8X9pd2CWKzuF5Jrftp1owXwnIGLUaL3PYndOHf4kNNXWrXK/m7CHunk7K8LE6YtBpcknwG9GKxnroY+ylBXcx4xKyx/u/EuXi509cP9V7OO1oyHnzrdFTcqLG/4ibBA5pIMr/4xvKzuQDkVy9wW8SgBFD6HDvuzMvrZcC9QlkfMzI7w64m+b4PqBMNHB05lH21PVxJo2/fBXxV4hB38PcD+5AkI4FuETsAAAAASUVORK5CYII=",Editor.previousLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMA7fci493c0MW8uJ6CZks4MxQHEZL6ewAAAFZJREFUOMvdkskRgDAMA4lDwg2B7b9XOlge/KKvdsa25KFb5XlRvxXC/DNBEv8IFNjBgGdDgXtFgTyhwDXiQAUHCvwa4Uv6mR6UR+1led2mVonvl+tML45qCQNQLIx7AAAAAElFTkSuQmCC",Editor.nextLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMA7fci493c0MW8uJ6CZks4MxQHEZL6ewAAAFRJREFUOMvd0skRgCAQBVEFwQ0V7fxzNQP6wI05v6pZ/kyj1b7FNgik2gQzzLcAwiUAigHOTwDHK4A1CmB5BJANJG1hQ9qafYcqFlZP3IFc9eVGrR+iIgkDQRUXIAAAAABJRU5ErkJggg==",Editor.refreshLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAolBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8ELnaCAAAANXRSTlMABfyE2QKU+dfNyyDyoVYKwnTv7N+6rntsYlFNQjEqEw316uSzf2c1JB3GvqebiVw6GAjQB4DQr10AAAE7SURBVDjLvZLXcoMwEABPIgRCx3TT3A3udqL//7UgAdGRcR4yk8k+idsdmgS/QyWEqD/axS2JDV33zlnzLHIzQ2MDq9OeJ3m8l76KKENYlxrmM/b65Ys1+8YxnTEZFIEY0vVhszFWfUGZDJpQTDznTgAe5k4XhQxILB7ruzBQn+kkyDXuHfRtjoYDEvH7J9Lz98dBZXXL94X0Ofco2PFlChKbjVzEdakoSlKjoNoqPYkJ/wUZAYwc+PpLj1Ei7+jdoBWlwQZoJv2H1w3CWgRvo7dd9DP5btgwCWz0M02+oVoxCcIWeY9PNmR6B++m9prMxYEISpCBYBlfy9bc745is7UUULAem1Ww7FfalsiA2uaJsgmWP3pQI9q9/yMLkaaHAp2fxhHff/cNq7dBdHXhGW7l+Mo2zU0Cf8knJ2xA0oJ8enwAAAAASUVORK5CYII=",Editor.backLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAclBMVEUAAAD////////////////+/v7////////////////////////////////////////////+/v7///////////////////////////////////////////////////////////////////////////////8vKLfTAAAAJXRSTlMACh7h9gby3NLIwzwZ55uVJgH57b+8tbCljYV1RRMQ46FrTzQw+vtxOQAAAJ5JREFUOMuF00cWgzAQA1DRDQFCbwFSdf8rZpdVrNH2z3tuMv7mldZQ2WN2yi8x+TT8JvyTkqvwpiKvwsOIrA1fWr+XGTklfj8dOQR+D3KyUF6QufBkJN0hfCazEv6sZBRCJDUcPasGKpu1RLtYE8lkHAPBQLoTsK/SfAyRw5FjAuhCzC2MSj0gJ+66lHatgXdKboD9tfREB5m9/+3iC9jHDYvsGNcUAAAAAElFTkSuQmCC",Editor.fullscreenLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAllBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AJcWoAAAAMXRSTlMA+wIFxPWPCIb446tnUxmsoIykgxTe29jQnpKBe2MNsZhVTR/KyLuWbFhEPjUq7L9z+bQj+gAAAWxJREFUOMttk4l2gkAMRTODCO4FtQgIbnWpS9v8/881iZFh8R51NO8GJ+gAjMN8zuTRFSw04cIOHQcqFHH6oaQFGxf0jeBjEgB8Y52TpW9Ag4zB5QICWOtHrgwGuFZBcw+gPP0MFS7+iiD5inOmDIQS9sZgTwUzwEzyxhxHVEEU7NdDUXsqUPtqjIgR2IZSCT4upzSeIeOdcMHnfDsx3giPoezfU6MrQGB5//SckLEG2xYscK4GfnUFqaix39zrwooaOD/cXoYuvHKQIc7pzd3HVPusp6t2FAW/RmjMonbl8vwHDeZo/GkleJC7e+p5XA/rAq1X/V10wKag04rBpa2/d0LL4OYYceOEtsG5jyMntI1wS+N1BGcQBl/CoLoPOl9ABrW/BP53e1bwSJHHlkIVchJwmHwyyfJ4kIvEnKtwkxNSEct83KSChT7WiWgDZ3ccZ0BM4tloJow2YUAtifNT3njnyD+y/pMsnP4DN3Y4yl1Gyk0AAAAASUVORK5CYII=",Editor.roughFillStyles=[{val:"auto",dispName:"Auto"},{val:"hachure",dispName:"Hachure"},{val:"solid",dispName:"Solid"},{val:"zigzag",dispName:"ZigZag"},{val:"cross-hatch",dispName:"Cross Hatch"},{val:"dots",dispName:"Dots"},{val:"dashed",dispName:"Dashed"},{val:"zigzag-line",dispName:"ZigZag Line"}],Editor.themes=null,Editor.ctrlKey=mxClient.IS_MAC?"Cmd":"Ctrl",Editor.hintOffset=20,Editor.popupsAllowed=!0,mxUtils.extend(Editor,mxEventSource),Editor.prototype.originalNoForeignObject=mxClient.NO_FO,Editor.prototype.transparentImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhMAAwAIAAAP///wAAACH5BAEAAAAALAAAAAAwADAAAAIxhI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8egpAAA7":IMAGE_PATH+"/transparent.gif",Editor.prototype.extendCanvas=!0,Editor.prototype.chromeless=!1,Editor.prototype.cancelFirst=!0,Editor.prototype.enabled=!0,Editor.prototype.filename=null,Editor.prototype.modified=!1,Editor.prototype.autosave=!0,Editor.prototype.initialTopSpacing=0,Editor.prototype.appName=document.title,Editor.prototype.editBlankUrl=window.location.protocol+"//"+window.location.host+"/",Editor.prototype.defaultGraphOverflow="hidden",Editor.prototype.init=function(){},Editor.prototype.isChromelessView=function(){return this.chromeless},Editor.prototype.setAutosave=function(e){this.autosave=e,this.fireEvent(new mxEventObject("autosaveChanged"))},Editor.prototype.getEditBlankUrl=function(e){return this.editBlankUrl+e},Editor.prototype.editAsNew=function(e,t){var i=null!=t?"?title="+encodeURIComponent(t):"";if(null!=urlParams.ui&&(i+=(i.length>0?"&":"?")+"ui="+urlParams.ui),void 0!==window.postMessage&&(null==document.documentMode||document.documentMode>=10)){var a=null,n=mxUtils.bind(this,function(t){"ready"==t.data&&t.source==a&&(mxEvent.removeListener(window,"message",n),a.postMessage(e,"*"))});mxEvent.addListener(window,"message",n),a=this.graph.openLink(this.getEditBlankUrl(i+(i.length>0?"&":"?")+"client=1"),null,!0)}else this.graph.openLink(this.getEditBlankUrl(i)+"#R"+encodeURIComponent(e))},Editor.prototype.createGraph=function(e,t){var i=new Graph(null,t,null,null,e);return i.transparentBackground=!1,this.chromeless||(i.isBlankLink=function(e){return!this.isExternalProtocol(e)}),i},Editor.prototype.resetGraph=function(){this.graph.gridEnabled=!this.isChromelessView()||"1"==urlParams.grid,this.graph.graphHandler.guidesEnabled=!0,this.graph.setTooltips(!0),this.graph.setConnectable(!0),this.graph.foldingEnabled=!0,this.graph.scrollbars=this.graph.defaultScrollbars,this.graph.pageVisible=this.graph.defaultPageVisible,this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible,this.graph.background=null,this.graph.pageScale=mxGraph.prototype.pageScale,this.graph.pageFormat=mxGraph.prototype.pageFormat,this.graph.currentScale=1,this.graph.currentTranslate.x=0,this.graph.currentTranslate.y=0,this.updateGraphComponents(),this.graph.view.setScale(1)},Editor.prototype.readGraphState=function(e){this.graph.gridEnabled="0"!=e.getAttribute("grid")&&(!this.isChromelessView()||"1"==urlParams.grid),this.graph.gridSize=parseFloat(e.getAttribute("gridSize"))||mxGraph.prototype.gridSize,this.graph.graphHandler.guidesEnabled="0"!=e.getAttribute("guides"),this.graph.setTooltips("0"!=e.getAttribute("tooltips")),this.graph.setConnectable("0"!=e.getAttribute("connect")),this.graph.connectionArrowsEnabled="0"!=e.getAttribute("arrows"),this.graph.foldingEnabled="0"!=e.getAttribute("fold"),this.isChromelessView()&&this.graph.foldingEnabled&&(this.graph.foldingEnabled="1"==urlParams.nav,this.graph.cellRenderer.forceControlClickHandler=this.graph.foldingEnabled);var t=parseFloat(e.getAttribute("pageScale"));if(!isNaN(t)&&t>0?this.graph.pageScale=t:this.graph.pageScale=mxGraph.prototype.pageScale,this.graph.isLightboxView()||this.graph.isViewer())this.graph.pageVisible=!1;else{var i=e.getAttribute("page");null!=i?this.graph.pageVisible="0"!=i:this.graph.pageVisible=this.graph.defaultPageVisible}this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible;var a=parseFloat(e.getAttribute("pageWidth")),n=parseFloat(e.getAttribute("pageHeight"));isNaN(a)||isNaN(n)||(this.graph.pageFormat=new mxRectangle(0,0,a,n));var l=e.getAttribute("background");null!=l&&l.length>0?this.graph.background=l:this.graph.background=null},Editor.prototype.setGraphXml=function(e){if(null!=e){var t=new mxCodec(e.ownerDocument);if("mxGraphModel"==e.nodeName){this.graph.model.beginUpdate();try{this.graph.model.clear(),this.graph.view.scale=1,this.readGraphState(e),this.updateGraphComponents(),t.decode(e,this.graph.getModel())}finally{this.graph.model.endUpdate()}this.fireEvent(new mxEventObject("resetGraphView"))}else if("root"==e.nodeName){this.resetGraph();var i=t.document.createElement("mxGraphModel");i.appendChild(e),t.decode(i,this.graph.getModel()),this.updateGraphComponents(),this.fireEvent(new mxEventObject("resetGraphView"))}else throw{message:mxResources.get("cannotOpenFile"),node:e,toString:function(){return this.message}}}else this.resetGraph(),this.graph.model.clear(),this.fireEvent(new mxEventObject("resetGraphView"))},Editor.prototype.getGraphXml=function(e){var t=null;return t=(e=null==e||e)?new mxCodec(mxUtils.createXmlDocument()).encode(this.graph.getModel()):this.graph.encodeCells(mxUtils.sortCells(this.graph.model.getTopmostCells(this.graph.getSelectionCells()))),(0!=this.graph.view.translate.x||0!=this.graph.view.translate.y)&&(t.setAttribute("dx",Math.round(100*this.graph.view.translate.x)/100),t.setAttribute("dy",Math.round(100*this.graph.view.translate.y)/100)),t.setAttribute("grid",this.graph.isGridEnabled()?"1":"0"),t.setAttribute("gridSize",this.graph.gridSize),t.setAttribute("guides",this.graph.graphHandler.guidesEnabled?"1":"0"),t.setAttribute("tooltips",this.graph.tooltipHandler.isEnabled()?"1":"0"),t.setAttribute("connect",this.graph.connectionHandler.isEnabled()?"1":"0"),t.setAttribute("arrows",this.graph.connectionArrowsEnabled?"1":"0"),t.setAttribute("fold",this.graph.foldingEnabled?"1":"0"),t.setAttribute("page",this.graph.pageVisible?"1":"0"),t.setAttribute("pageScale",this.graph.pageScale),t.setAttribute("pageWidth",this.graph.pageFormat.width),t.setAttribute("pageHeight",this.graph.pageFormat.height),null!=this.graph.background&&t.setAttribute("background",this.graph.background),t},Editor.prototype.updateGraphComponents=function(){var e=this.graph;null!=e.container&&(e.view.validateBackground(),e.container.style.overflow=e.scrollbars?"auto":this.defaultGraphOverflow,this.fireEvent(new mxEventObject("updateGraphComponents")))},Editor.prototype.setModified=function(e){this.modified=e},Editor.prototype.setFilename=function(e){this.filename=e},Editor.prototype.createUndoManager=function(){var e=this.graph,t=new mxUndoManager;this.undoListener=function(e,i){t.undoableEditHappened(i.getProperty("edit"))};var i=mxUtils.bind(this,function(e,t){this.undoListener.apply(this,arguments)});e.getModel().addListener(mxEvent.UNDO,i),e.getView().addListener(mxEvent.UNDO,i);var a=function(t,i){var a=e.getSelectionCellsForChanges(i.getProperty("edit").changes,function(e){return!(e instanceof mxChildChange)});if(a.length>0){e.getModel();for(var n=[],l=0;l<a.length;l++)null!=e.view.getState(a[l])&&n.push(a[l]);e.setSelectionCells(n)}};return t.addListener(mxEvent.UNDO,a),t.addListener(mxEvent.REDO,a),t},Editor.prototype.initStencilRegistry=function(){},Editor.prototype.destroy=function(){null!=this.graph&&(this.graph.destroy(),this.graph=null)},(OpenFile=function(e){this.producer=null,this.consumer=null,this.done=e,this.args=null}).prototype.setConsumer=function(e){this.consumer=e,this.execute()},OpenFile.prototype.setData=function(){this.args=arguments,this.execute()},OpenFile.prototype.error=function(e){this.cancel(!0),mxUtils.alert(e)},OpenFile.prototype.execute=function(){null!=this.consumer&&null!=this.args&&(this.cancel(!1),this.consumer.apply(this,this.args))},OpenFile.prototype.cancel=function(e){null!=this.done&&this.done(null==e||e)},Dialog.backdropColor="white",Dialog.prototype.zIndex=mxPopupMenu.prototype.zIndex-1,Dialog.prototype.noColorImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEzRDlBMUUwODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEzRDlBMUUxODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTNEOUExREU4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTNEOUExREY4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5xh3fmAAAABlBMVEX////MzMw46qqDAAAAGElEQVR42mJggAJGKGAYIIGBth8KAAIMAEUQAIElnLuQAAAAAElFTkSuQmCC":IMAGE_PATH+"/nocolor.png",Dialog.prototype.closeImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJAQMAAADaX5RTAAAABlBMVEV7mr3///+wksspAAAAAnRSTlP/AOW3MEoAAAAdSURBVAgdY9jXwCDDwNDRwHCwgeExmASygSL7GgB12QiqNHZZIwAAAABJRU5ErkJggg==":IMAGE_PATH+"/close.png",Dialog.prototype.clearImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQAKAIABAMDAwP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUIzOEM1NzI4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUIzOEM1NzM4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QjM4QzU3MDg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QjM4QzU3MTg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAANAAoAAAIXTGCJebD9jEOTqRlttXdrB32PJ2ncyRQAOw==":IMAGE_PATH+"/clear.gif",Dialog.prototype.lockedImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzdDMDZCODExNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzdDMDZCODIxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozN0MwNkI3RjE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozN0MwNkI4MDE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvqMCFYAAAAVUExURZmZmb+/v7KysqysrMzMzLGxsf///4g8N1cAAAAHdFJOU////////wAaSwNGAAAAPElEQVR42lTMQQ4AIQgEwUa0//9kTQirOweYOgDqAMbZUr10AGlAwx4/BJ2QJ4U0L5brYjovvpv32xZgAHZaATFtMbu4AAAAAElFTkSuQmCC":IMAGE_PATH+"/locked.png",Dialog.prototype.unlockedImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzdDMDZCN0QxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzdDMDZCN0UxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozN0MwNkI3QjE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozN0MwNkI3QzE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkKMpVwAAAAYUExURZmZmbKysr+/v6ysrOXl5czMzLGxsf///zHN5lwAAAAIdFJOU/////////8A3oO9WQAAADxJREFUeNpUzFESACAEBNBVsfe/cZJU+8Mzs8CIABCidtfGOndnYsT40HDSiCcbPdoJo10o9aI677cpwACRoAF3dFNlswAAAABJRU5ErkJggg==":IMAGE_PATH+"/unlocked.png",Dialog.prototype.bgOpacity=80,Dialog.prototype.getPosition=function(e,t){return new mxPoint(e,t)},Dialog.prototype.close=function(e,t){if(null!=this.onDialogClose){if(!1==this.onDialogClose(e,t))return!1;this.onDialogClose=null}null!=this.dialogImg&&(this.dialogImg.parentNode.removeChild(this.dialogImg),this.dialogImg=null),null!=this.bg&&null!=this.bg.parentNode&&this.bg.parentNode.removeChild(this.bg),mxEvent.removeListener(window,"resize",this.resizeListener),this.container.parentNode.removeChild(this.container)};var ErrorDialog=function(e,t,i,a,n,l,r,A,o,g,s){o=null==o||o;var h=document.createElement("div");if(h.style.textAlign="center",null!=t){var d=document.createElement("div");d.style.padding="0px",d.style.margin="0px",d.style.fontSize="18px",d.style.paddingBottom="16px",d.style.marginBottom="10px",d.style.borderBottom="1px solid #c0c0c0",d.style.color="gray",d.style.whiteSpace="nowrap",d.style.textOverflow="ellipsis",d.style.overflow="hidden",mxUtils.write(d,t),d.setAttribute("title",t),h.appendChild(d)}var p=document.createElement("div");p.style.lineHeight="1.2em",p.style.padding="6px",p.innerHTML=i,h.appendChild(p);var c=document.createElement("div");if(c.style.marginTop="12px",c.style.textAlign="center",null!=l){var u=mxUtils.button(mxResources.get("tryAgain"),function(){e.hideDialog(),l()});u.className="geBtn",c.appendChild(u),c.style.textAlign="center"}if(null!=g){var m=mxUtils.button(g,function(){null!=s&&s()});m.className="geBtn",c.appendChild(m)}var b=mxUtils.button(a,function(){o&&e.hideDialog(),null!=n&&n()});if(b.className="geBtn",c.appendChild(b),null!=r){var $=mxUtils.button(r,function(){o&&e.hideDialog(),null!=A&&A()});$.className="geBtn gePrimaryBtn",c.appendChild($)}this.init=function(){b.focus()},h.appendChild(c),this.container=h},PrintDialog=function(e,t){this.create(e,t)};PrintDialog.prototype.create=function(e){var t,i,a=e.editor.graph,n=document.createElement("table");n.style.width="100%",n.style.height="100%";var l=document.createElement("tbody");t=document.createElement("tr");var r=document.createElement("input");r.setAttribute("type","checkbox"),(i=document.createElement("td")).setAttribute("colspan","2"),i.style.fontSize="10pt",i.appendChild(r);var A=document.createElement("span");mxUtils.write(A," "+mxResources.get("fitPage")),i.appendChild(A),mxEvent.addListener(A,"click",function(e){r.checked=!r.checked,o.checked=!r.checked,mxEvent.consume(e)}),mxEvent.addListener(r,"change",function(){o.checked=!r.checked}),t.appendChild(i),l.appendChild(t),t=t.cloneNode(!1);var o=document.createElement("input");o.setAttribute("type","checkbox"),(i=document.createElement("td")).style.fontSize="10pt",i.appendChild(o);var A=document.createElement("span");mxUtils.write(A," "+mxResources.get("posterPrint")+":"),i.appendChild(A),mxEvent.addListener(A,"click",function(e){o.checked=!o.checked,r.checked=!o.checked,mxEvent.consume(e)}),t.appendChild(i);var g=document.createElement("input");g.setAttribute("value","1"),g.setAttribute("type","number"),g.setAttribute("min","1"),g.setAttribute("size","4"),g.setAttribute("disabled","disabled"),g.style.width="50px",(i=document.createElement("td")).style.fontSize="10pt",i.appendChild(g),mxUtils.write(i," "+mxResources.get("pages")+" (max)"),t.appendChild(i),l.appendChild(t),mxEvent.addListener(o,"change",function(){o.checked?g.removeAttribute("disabled"):g.setAttribute("disabled","disabled"),r.checked=!o.checked}),t=t.cloneNode(!1),i=document.createElement("td"),mxUtils.write(i,mxResources.get("pageScale")+":"),t.appendChild(i),i=document.createElement("td");var s=document.createElement("input");function h(e){var t=r.checked||o.checked,i=parseInt(s.value)/100;isNaN(i)&&(i=1,s.value="100%"),i*=.75;var n=a.pageFormat||mxConstants.PAGE_FORMAT_A4_PORTRAIT,l=1/a.pageScale;if(t){var A=r.checked?1:parseInt(g.value);isNaN(A)||(l=mxUtils.getScaleForPageCount(A,a,n))}a.getGraphBounds();var h=0,d=0;if((n=mxRectangle.fromRectangle(n)).width=Math.ceil(n.width*i),n.height=Math.ceil(n.height*i),l*=i,!t&&a.pageVisible){var p=a.getPageLayout();h-=p.x*n.width,d-=p.y*n.height}else t=!0;var c=PrintDialog.createPrintPreview(a,l,n,0,h,d,t);c.open(),e&&PrintDialog.printPreview(c)}s.setAttribute("value","100 %"),s.setAttribute("size","5"),s.style.width="50px",i.appendChild(s),t.appendChild(i),l.appendChild(t),t=document.createElement("tr"),(i=document.createElement("td")).colSpan=2,i.style.paddingTop="20px",i.setAttribute("align","right");var d=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog()});if(d.className="geBtn",e.editor.cancelFirst&&i.appendChild(d),PrintDialog.previewEnabled){var p=mxUtils.button(mxResources.get("preview"),function(){e.hideDialog(),h(!1)});p.className="geBtn",i.appendChild(p)}var c=mxUtils.button(mxResources.get(PrintDialog.previewEnabled?"print":"ok"),function(){e.hideDialog(),h(!0)});c.className="geBtn gePrimaryBtn",i.appendChild(c),e.editor.cancelFirst||i.appendChild(d),t.appendChild(i),l.appendChild(t),n.appendChild(l),this.container=n},PrintDialog.printPreview=function(e){try{if(null!=e.wnd){var t=function(){e.wnd.focus(),e.wnd.print(),e.wnd.close()};mxClient.IS_GC?window.setTimeout(t,500):t()}}catch(i){}},PrintDialog.createPrintPreview=function(e,t,i,a,n,l,r){var A=new mxPrintPreview(e,t,i,a,n,l);A.title=mxResources.get("preview"),A.printBackgroundImage=!0,A.autoOrigin=r;var o=e.background;(null==o||""==o||o==mxConstants.NONE)&&(o="#ffffff"),A.backgroundColor=o;var g=A.writeHead;return A.writeHead=function(e){g.apply(this,arguments),e.writeln('<style type="text/css">'),e.writeln("@media screen {"),e.writeln("  body > div { padding:30px;box-sizing:content-box; }"),e.writeln("}"),e.writeln("</style>")},A},PrintDialog.previewEnabled=!0;var PageSetupDialog=function(e){var t,i,a=e.editor.graph,n=document.createElement("table");n.style.width="100%",n.style.height="100%";var l=document.createElement("tbody");t=document.createElement("tr"),(i=document.createElement("td")).style.verticalAlign="top",i.style.fontSize="10pt",mxUtils.write(i,mxResources.get("paperSize")+":"),t.appendChild(i),(i=document.createElement("td")).style.verticalAlign="top",i.style.fontSize="10pt";var r=PageSetupDialog.addPageFormatPanel(i,"pagesetupdialog",a.pageFormat);t.appendChild(i),l.appendChild(t),t=document.createElement("tr"),i=document.createElement("td"),mxUtils.write(i,mxResources.get("background")+":"),t.appendChild(i),(i=document.createElement("td")).style.whiteSpace="nowrap",document.createElement("input").setAttribute("type","text");var A=document.createElement("button");A.style.width="18px",A.style.height="18px",A.style.marginRight="20px",A.style.backgroundPosition="center center",A.style.backgroundRepeat="no-repeat";var o=a.background;function g(){null==o||o==mxConstants.NONE?(A.style.backgroundColor="",A.style.backgroundImage="url('"+Dialog.prototype.noColorImage+"')"):(A.style.backgroundColor=o,A.style.backgroundImage="")}g(),mxEvent.addListener(A,"click",function(t){e.pickColor(o||"none",function(e){o=e,g()}),mxEvent.consume(t)}),i.appendChild(A),mxUtils.write(i,mxResources.get("gridSize")+":");var s=document.createElement("input");s.setAttribute("type","number"),s.setAttribute("min","0"),s.style.width="40px",s.style.marginLeft="6px",s.value=a.getGridSize(),i.appendChild(s),mxEvent.addListener(s,"change",function(){var e=parseInt(s.value);s.value=Math.max(1,isNaN(e)?a.getGridSize():e)}),t.appendChild(i),l.appendChild(t),t=document.createElement("tr"),i=document.createElement("td"),mxUtils.write(i,mxResources.get("image")+":"),t.appendChild(i),i=document.createElement("td");var h=document.createElement("a");h.style.textDecoration="underline",h.style.cursor="pointer",h.style.color="#a0a0a0";var d=a.backgroundImage;function p(){null==d?(h.removeAttribute("title"),h.style.fontSize="",h.innerHTML=mxUtils.htmlEntities(mxResources.get("change"))+"..."):(h.setAttribute("title",d.src),h.style.fontSize="11px",h.innerHTML=mxUtils.htmlEntities(d.src.substring(0,42))+"...")}mxEvent.addListener(h,"click",function(t){e.showBackgroundImageDialog(function(e,t){t||(d=e,p())},d),mxEvent.consume(t)}),p(),i.appendChild(h),t.appendChild(i),l.appendChild(t),t=document.createElement("tr"),(i=document.createElement("td")).colSpan=2,i.style.paddingTop="16px",i.setAttribute("align","right");var c=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog()});c.className="geBtn",e.editor.cancelFirst&&i.appendChild(c);var u=mxUtils.button(mxResources.get("apply"),function(){e.hideDialog();var t=parseInt(s.value);isNaN(t)||a.gridSize===t||a.setGridSize(t);var i=new ChangePageSetup(e,o,d,r.get());i.ignoreColor=a.background==o;var n=null!=a.backgroundImage?a.backgroundImage.src:null,l=null!=d?d.src:null;i.ignoreImage=n===l,a.pageFormat.width==i.previousFormat.width&&a.pageFormat.height==i.previousFormat.height&&i.ignoreColor&&i.ignoreImage||a.model.execute(i)});u.className="geBtn gePrimaryBtn",i.appendChild(u),e.editor.cancelFirst||i.appendChild(c),t.appendChild(i),l.appendChild(t),n.appendChild(l),this.container=n};PageSetupDialog.addPageFormatPanel=function(e,t,i,a){var n="format-"+t,l=document.createElement("input");l.setAttribute("name",n),l.setAttribute("type","radio"),l.setAttribute("value","portrait");var r=document.createElement("input");r.setAttribute("name",n),r.setAttribute("type","radio"),r.setAttribute("value","landscape");var A=document.createElement("select");A.style.marginBottom="8px",A.style.width="202px";var o=document.createElement("div");o.style.marginLeft="4px",o.style.width="210px",o.style.height="24px",l.style.marginRight="6px",o.appendChild(l);var g=document.createElement("span");g.style.maxWidth="100px",mxUtils.write(g,mxResources.get("portrait")),o.appendChild(g),r.style.marginLeft="10px",r.style.marginRight="6px",o.appendChild(r);var s=document.createElement("span");s.style.width="100px",mxUtils.write(s,mxResources.get("landscape")),o.appendChild(s);var h=document.createElement("div");h.style.marginLeft="4px",h.style.width="210px",h.style.height="24px";var d=document.createElement("input");d.setAttribute("size","7"),d.style.textAlign="right",h.appendChild(d),mxUtils.write(h," in x ");var p=document.createElement("input");p.setAttribute("size","7"),p.style.textAlign="right",h.appendChild(p),mxUtils.write(h," in"),o.style.display="none",h.style.display="none";for(var c={},u=PageSetupDialog.getFormats(),m=0;m<u.length;m++){var b=u[m];c[b.key]=b;var $=document.createElement("option");$.setAttribute("value",b.key),mxUtils.write($,b.title),A.appendChild($)}var y=!1;function v(e,t,a){if(a||d!=document.activeElement&&p!=document.activeElement){for(var n=!1,g=0;g<u.length;g++){var s=u[g];y?"custom"==s.key&&(A.value=s.key,y=!1):null!=s.format&&("a4"==s.key?826==i.width?(i=mxRectangle.fromRectangle(i)).width=827:826==i.height&&((i=mxRectangle.fromRectangle(i)).height=827):"a5"==s.key&&(584==i.width?(i=mxRectangle.fromRectangle(i)).width=583:584==i.height&&((i=mxRectangle.fromRectangle(i)).height=583)),i.width==s.format.width&&i.height==s.format.height?(A.value=s.key,l.setAttribute("checked","checked"),l.defaultChecked=!0,l.checked=!0,r.removeAttribute("checked"),r.defaultChecked=!1,r.checked=!1,n=!0):i.width==s.format.height&&i.height==s.format.width&&(A.value=s.key,l.removeAttribute("checked"),l.defaultChecked=!1,l.checked=!1,r.setAttribute("checked","checked"),r.defaultChecked=!0,r.checked=!0,n=!0))}n?(o.style.display="",h.style.display="none"):(d.value=i.width/100,p.value=i.height/100,l.setAttribute("checked","checked"),A.value="custom",o.style.display="none",h.style.display="")}}v(),e.appendChild(A),mxUtils.br(e),e.appendChild(o),e.appendChild(h);var w=i,M=function(e,t){var n=c[A.value];null!=n.format?(d.value=n.format.width/100,p.value=n.format.height/100,h.style.display="none",o.style.display=""):(o.style.display="none",h.style.display="");var l=parseFloat(d.value);(isNaN(l)||l<=0)&&(d.value=i.width/100);var g=parseFloat(p.value);(isNaN(g)||g<=0)&&(p.value=i.height/100);var s=new mxRectangle(0,0,Math.floor(100*parseFloat(d.value)),Math.floor(100*parseFloat(p.value)));"custom"!=A.value&&r.checked&&(s=new mxRectangle(0,0,s.height,s.width)),t&&y||s.width==w.width&&s.height==w.height||(w=s,null!=a&&a(w))};return mxEvent.addListener(g,"click",function(e){l.checked=!0,M(e),mxEvent.consume(e)}),mxEvent.addListener(s,"click",function(e){r.checked=!0,M(e),mxEvent.consume(e)}),mxEvent.addListener(d,"blur",M),mxEvent.addListener(d,"click",M),mxEvent.addListener(p,"blur",M),mxEvent.addListener(p,"click",M),mxEvent.addListener(r,"change",M),mxEvent.addListener(l,"change",M),mxEvent.addListener(A,"change",function(e){y="custom"==A.value,M(e,!0)}),M(),{set:function(e){i=e,v(null,null,!0)},get:function(){return w},widthInput:d,heightInput:p}},PageSetupDialog.getFormats=function(){return[{key:"letter",title:'US-Letter (8,5" x 11")',format:mxConstants.PAGE_FORMAT_LETTER_PORTRAIT},{key:"legal",title:'US-Legal (8,5" x 14")',format:new mxRectangle(0,0,850,1400)},{key:"tabloid",title:'US-Tabloid (11" x 17")',format:new mxRectangle(0,0,1100,1700)},{key:"executive",title:'US-Executive (7" x 10")',format:new mxRectangle(0,0,700,1e3)},{key:"a0",title:"A0 (841 mm x 1189 mm)",format:new mxRectangle(0,0,3300,4681)},{key:"a1",title:"A1 (594 mm x 841 mm)",format:new mxRectangle(0,0,2339,3300)},{key:"a2",title:"A2 (420 mm x 594 mm)",format:new mxRectangle(0,0,1654,2336)},{key:"a3",title:"A3 (297 mm x 420 mm)",format:new mxRectangle(0,0,1169,1654)},{key:"a4",title:"A4 (210 mm x 297 mm)",format:mxConstants.PAGE_FORMAT_A4_PORTRAIT},{key:"a5",title:"A5 (148 mm x 210 mm)",format:new mxRectangle(0,0,583,827)},{key:"a6",title:"A6 (105 mm x 148 mm)",format:new mxRectangle(0,0,413,583)},{key:"a7",title:"A7 (74 mm x 105 mm)",format:new mxRectangle(0,0,291,413)},{key:"b4",title:"B4 (250 mm x 353 mm)",format:new mxRectangle(0,0,980,1390)},{key:"b5",title:"B5 (176 mm x 250 mm)",format:new mxRectangle(0,0,690,980)},{key:"16-9",title:"16:9 (1600 x 900)",format:new mxRectangle(0,0,900,1600)},{key:"16-10",title:"16:10 (1920 x 1200)",format:new mxRectangle(0,0,1200,1920)},{key:"4-3",title:"4:3 (1600 x 1200)",format:new mxRectangle(0,0,1200,1600)},{key:"custom",title:mxResources.get("custom"),format:null}]};var FilenameDialog=function(e,t,i,a,n,l,r,A,o,g,s,h){o=null==o||o;var d,p,c=document.createElement("table"),u=document.createElement("tbody");c.style.marginTop="8px",d=document.createElement("tr"),(p=document.createElement("td")).style.whiteSpace="nowrap",p.style.fontSize="10pt",p.style.width=s?"80px":"120px",mxUtils.write(p,(n||mxResources.get("filename"))+":"),d.appendChild(p);var m=document.createElement("input");m.setAttribute("value",t||""),m.style.marginLeft="4px",m.style.width=null!=h?h+"px":"180px";var b=mxUtils.button(i,function(){(null==l||l(m.value))&&(o&&e.hideDialog(),a(m.value))});if(b.className="geBtn gePrimaryBtn",this.init=function(){if((null!=n||null==r)&&(m.focus(),mxClient.IS_GC||mxClient.IS_FF||document.documentMode>=5||mxClient.IS_QUIRKS?m.select():document.execCommand("selectAll",!1,null),Graph.fileSupport)){var t=c.parentNode;if(null!=t){e.editor.graph;var i=null;mxEvent.addListener(t,"dragleave",function(e){null!=i&&(i.style.backgroundColor="",i=null),e.stopPropagation(),e.preventDefault()}),mxEvent.addListener(t,"dragover",mxUtils.bind(this,function(e){null==i&&(!mxClient.IS_IE||document.documentMode>10)&&((i=m).style.backgroundColor="#ebf2f9"),e.stopPropagation(),e.preventDefault()})),mxEvent.addListener(t,"drop",mxUtils.bind(this,function(e){null!=i&&(i.style.backgroundColor="",i=null),mxUtils.indexOf(e.dataTransfer.types,"text/uri-list")>=0&&(m.value=decodeURIComponent(e.dataTransfer.getData("text/uri-list")),b.click()),e.stopPropagation(),e.preventDefault()}))}}},(p=document.createElement("td")).style.whiteSpace="nowrap",p.appendChild(m),d.appendChild(p),(null!=n||null==r)&&(u.appendChild(d),null!=s)){if(null!=e.editor.diagramFileTypes){var $=FilenameDialog.createFileTypes(e,m,e.editor.diagramFileTypes);$.style.marginLeft="6px",$.style.width="74px",p.appendChild($),m.style.width=null!=h?h-40+"px":"140px"}p.appendChild(FilenameDialog.createTypeHint(e,m,s))}null!=r&&(d=document.createElement("tr"),(p=document.createElement("td")).colSpan=2,p.appendChild(r),d.appendChild(p),u.appendChild(d)),d=document.createElement("tr"),(p=document.createElement("td")).colSpan=2,p.style.paddingTop="20px",p.style.whiteSpace="nowrap",p.setAttribute("align","right");var y=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog(),null!=g&&g()});if(y.className="geBtn",e.editor.cancelFirst&&p.appendChild(y),null!=A){var v=mxUtils.button(mxResources.get("help"),function(){e.editor.graph.openLink(A)});v.className="geBtn",p.appendChild(v)}mxEvent.addListener(m,"keypress",function(e){13==e.keyCode&&b.click()}),p.appendChild(b),e.editor.cancelFirst||p.appendChild(y),d.appendChild(p),u.appendChild(d),c.appendChild(u),this.container=c};FilenameDialog.filenameHelpLink=null,FilenameDialog.createTypeHint=function(e,t,i){var a=document.createElement("img");a.style.cssText="vertical-align:top;height:16px;width:16px;margin-left:4px;background-repeat:no-repeat;background-position:center bottom;cursor:pointer;",mxUtils.setOpacity(a,70);var n=function(){a.setAttribute("src",Editor.helpImage),a.setAttribute("title",mxResources.get("help"));for(var e=0;e<i.length;e++)if(i[e].ext.length>0&&t.value.toLowerCase().substring(t.value.length-i[e].ext.length-1)=="."+i[e].ext){a.setAttribute("src",mxClient.imageBasePath+"/warning.png"),a.setAttribute("title",mxResources.get(i[e].title));break}};return mxEvent.addListener(t,"keyup",n),mxEvent.addListener(t,"change",n),mxEvent.addListener(a,"click",function(t){var i=a.getAttribute("title");a.getAttribute("src")==Editor.helpImage?e.editor.graph.openLink(FilenameDialog.filenameHelpLink):""!=i&&e.showError(null,i,mxResources.get("help"),function(){e.editor.graph.openLink(FilenameDialog.filenameHelpLink)},null,mxResources.get("ok"),null,null,null,340,90),mxEvent.consume(t)}),n(),a},FilenameDialog.createFileTypes=function(e,t,i){for(var a=document.createElement("select"),n=0;n<i.length;n++){var l=document.createElement("option");l.setAttribute("value",n),mxUtils.write(l,mxResources.get(i[n].description)+" (."+i[n].extension+")"),a.appendChild(l)}mxEvent.addListener(a,"change",function(e){var n=i[a.value].extension,l=t.value.lastIndexOf(".");if(l>0){var n=i[a.value].extension;t.value=t.value.substring(0,l+1)+n}else t.value=t.value+"."+n;if("createEvent"in document){var r=document.createEvent("HTMLEvents");r.initEvent("change",!1,!0),t.dispatchEvent(r)}else t.fireEvent("onchange")});var r=function(e){var n=t.value.lastIndexOf("."),l=0;if(n>0){for(var r=t.value.toLowerCase().substring(n+1),A=0;A<i.length;A++)if(r==i[A].extension){l=A;break}}a.value=l};return mxEvent.addListener(t,"change",r),mxEvent.addListener(t,"keyup",r),r(),a},function(){mxGraphView.prototype.validateBackgroundPage=function(){var e=this.graph;if(null!=e.container&&!e.transparentBackground){if(e.pageVisible){var t=this.getBackgroundPageBounds();if(null==this.backgroundPageShape){for(var i=e.container.firstChild;null!=i&&i.nodeType!=mxConstants.NODETYPE_ELEMENT;)i=i.nextSibling;null!=i&&(this.backgroundPageShape=this.createBackgroundPageShape(t),this.backgroundPageShape.scale=1,this.backgroundPageShape.isShadow=!mxClient.IS_QUIRKS,this.backgroundPageShape.dialect=mxConstants.DIALECT_STRICTHTML,this.backgroundPageShape.init(e.container),i.style.position="absolute",e.container.insertBefore(this.backgroundPageShape.node,i),this.backgroundPageShape.redraw(),this.backgroundPageShape.node.className="geBackgroundPage",mxEvent.addListener(this.backgroundPageShape.node,"dblclick",mxUtils.bind(this,function(t){e.dblClick(t)})),mxEvent.addGestureListeners(this.backgroundPageShape.node,mxUtils.bind(this,function(t){e.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){null!=e.tooltipHandler&&e.tooltipHandler.isHideOnHover()&&e.tooltipHandler.hide(),e.isMouseDown&&!mxEvent.isConsumed(t)&&e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))})))}else this.backgroundPageShape.scale=1,this.backgroundPageShape.bounds=t,this.backgroundPageShape.redraw()}else null!=this.backgroundPageShape&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null);this.validateBackgroundStyles()}},mxGraphView.prototype.validateBackgroundStyles=function(){var e=this.graph,t=null==e.background||e.background==mxConstants.NONE?e.defaultPageBackgroundColor:e.background,i=null!=t&&this.gridColor!=t.toLowerCase()?this.gridColor:"#ffffff",a="none",n="";if(e.isGridEnabled()){var l=10;mxClient.IS_SVG?(a=unescape(encodeURIComponent(this.createSvgGrid(i))),a="url(data:image/svg+xml;base64,"+(a=window.btoa?btoa(a):Base64.encode(a,!0))+")",l=e.gridSize*this.scale*this.gridSteps):a="url("+this.gridImage+")";var r=0,A=0;if(null!=e.view.backgroundPageShape){var o=this.getBackgroundPageBounds();r=1+o.x,A=1+o.y}n=-Math.round(l-mxUtils.mod(this.translate.x*this.scale-r,l))+"px "+-Math.round(l-mxUtils.mod(this.translate.y*this.scale-A,l))+"px"}var g=e.view.canvas;null!=g.ownerSVGElement&&(g=g.ownerSVGElement),null!=e.view.backgroundPageShape?(e.view.backgroundPageShape.node.style.backgroundPosition=n,e.view.backgroundPageShape.node.style.backgroundImage=a,e.view.backgroundPageShape.node.style.backgroundColor=t,e.container.className="geDiagramContainer geDiagramBackdrop",g.style.backgroundImage="none",g.style.backgroundColor=""):(e.container.className="geDiagramContainer",g.style.backgroundPosition=n,g.style.backgroundColor=t,g.style.backgroundImage=a)},mxGraphView.prototype.createSvgGrid=function(e){for(var t=this.graph.gridSize*this.scale;t<this.minGridSize;)t*=2;for(var i=this.gridSteps*t,a=[],n=1;n<this.gridSteps;n++){var l=n*t;a.push("M 0 "+l+" L "+i+" "+l+" M "+l+" 0 L "+l+" "+i)}var r=i;return'<svg width="'+r+'" height="'+r+'" xmlns="'+mxConstants.NS_SVG+'"><defs><pattern id="grid" width="'+i+'" height="'+i+'" patternUnits="userSpaceOnUse"><path d="'+a.join(" ")+'" fill="none" stroke="'+e+'" opacity="0.2" stroke-width="1"/><path d="M '+i+" 0 L 0 0 0 "+i+'" fill="none" stroke="'+e+'" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(#grid)"/></svg>'};var e=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(t,i){if(e.apply(this,arguments),null!=this.shiftPreview1){var a=this.view.canvas;null!=a.ownerSVGElement&&(a=a.ownerSVGElement);var n=this.gridSize*this.view.scale*this.view.gridSteps,l=-Math.round(n-mxUtils.mod(this.view.translate.x*this.view.scale+t,n))+"px "+-Math.round(n-mxUtils.mod(this.view.translate.y*this.view.scale+i,n))+"px";a.style.backgroundPosition=l}},mxGraph.prototype.updatePageBreaks=function(e,t,i){var a=this.view.scale,n=this.view.translate,l=this.pageFormat,r=a*this.pageScale,A=this.view.getBackgroundPageBounds();t=A.width,i=A.height;var o=new mxRectangle(a*n.x,a*n.y,l.width*r,l.height*r),g=(e=e&&Math.min(o.width,o.height)>this.minPageBreakDist)?Math.ceil(i/o.height)-1:0,s=e?Math.ceil(t/o.width)-1:0,h=A.x+t,d=A.y+i;null==this.horizontalPageBreaks&&g>0&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&s>0&&(this.verticalPageBreaks=[]);var p=mxUtils.bind(this,function(e){if(null!=e){for(var t=e==this.horizontalPageBreaks?g:s,i=0;i<=t;i++){var a=e==this.horizontalPageBreaks?[new mxPoint(Math.round(A.x),Math.round(A.y+(i+1)*o.height)),new mxPoint(Math.round(h),Math.round(A.y+(i+1)*o.height))]:[new mxPoint(Math.round(A.x+(i+1)*o.width),Math.round(A.y)),new mxPoint(Math.round(A.x+(i+1)*o.width),Math.round(d))];if(null!=e[i])e[i].points=a,e[i].redraw();else{var n=new mxPolyline(a,this.pageBreakColor);n.dialect=this.dialect,n.isDashed=this.pageBreakDashed,n.pointerEvents=!1,n.init(this.view.backgroundPane),n.redraw(),e[i]=n}}for(var i=t;i<e.length;i++)e[i].destroy();e.splice(t,e.length-t)}});p(this.horizontalPageBreaks),p(this.verticalPageBreaks)};var t=mxGraphHandler.prototype.shouldRemoveCellsFromParent;mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(e,i,a){for(var n=0;n<i.length;n++){if(this.graph.isTableCell(i[n])||this.graph.isTableRow(i[n]))return!1;if(this.graph.getModel().isVertex(i[n])){var l=this.graph.getCellGeometry(i[n]);if(null!=l&&l.relative)return!1}}return t.apply(this,arguments)};var i=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var e=i.apply(this,arguments);return e.intersects=mxUtils.bind(this,function(t,i){return!!this.isConnecting()||mxCellMarker.prototype.intersects.apply(e,arguments)}),e},mxGraphView.prototype.createBackgroundPageShape=function(e){return new mxRectangleShape(e,"#ffffff",this.graph.defaultPageBorderColor)},mxGraphView.prototype.getBackgroundPageBounds=function(){var e=this.getGraphBounds(),t=e.width>0?e.x/this.scale-this.translate.x:0,i=e.height>0?e.y/this.scale-this.translate.y:0,a=e.width/this.scale,n=e.height/this.scale,l=this.graph.pageFormat,r=this.graph.pageScale,A=l.width*r,o=l.height*r,g=Math.floor(Math.min(0,t)/A),s=Math.floor(Math.min(0,i)/o);return new mxRectangle(this.scale*(this.translate.x+g*A),this.scale*(this.translate.y+s*o),this.scale*(Math.ceil(Math.max(1,t+a)/A)-g)*A,this.scale*(Math.ceil(Math.max(1,i+n)/o)-s)*o)};var a=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(e,t){a.apply(this,arguments),this.dialect==mxConstants.DIALECT_SVG||null==this.view.backgroundPageShape||this.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.container)||(this.view.backgroundPageShape.node.style.marginLeft=e+"px",this.view.backgroundPageShape.node.style.marginTop=t+"px")};var n=mxPopupMenu.prototype.addItem;mxPopupMenu.prototype.addItem=function(e,t,i,a,l,r){var A=n.apply(this,arguments);return null==r||r||mxEvent.addListener(A,"mousedown",function(e){mxEvent.consume(e)}),A};var l=mxGraphHandler.prototype.isPropagateSelectionCell;mxGraphHandler.prototype.isPropagateSelectionCell=function(e,t,i){var a=!1,n=this.graph.model.getParent(e);if(t){var r=this.graph.model.isEdge(e)?null:this.graph.getCellGeometry(e);a=!this.graph.model.isEdge(n)&&!this.graph.isSiblingSelected(e)&&(null!=r&&r.relative||!this.graph.isContainer(n)||this.graph.isPart(e))}else if(a=l.apply(this,arguments),this.graph.isTableCell(e)||this.graph.isTableRow(e)){var A=n;this.graph.isTable(A)||(A=this.graph.model.getParent(A)),a=!this.graph.selectionCellsHandler.isHandled(A)||this.graph.isCellSelected(A)&&this.graph.isToggleEvent(i.getEvent())||this.graph.isCellSelected(e)&&!this.graph.isToggleEvent(i.getEvent())||this.graph.isTableCell(e)&&this.graph.isCellSelected(n)}return a},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(e){for(var t=e.getCell(),i=this.graph.getModel(),a=i.getParent(t),n=this.graph.view.getState(a),l=this.graph.isCellSelected(t);null!=n&&(i.isVertex(a)||i.isEdge(a));){var r=this.graph.isCellSelected(a);l=l||r,(r||!l&&(this.graph.isTableCell(t)||this.graph.isTableRow(t)))&&(t=a),a=i.getParent(a)}return t}}();